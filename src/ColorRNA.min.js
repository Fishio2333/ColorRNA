function ColorRNA(){this._xyz={X:0,Y:0,Z:0};this._gamma=-2.2;this._colorSpace="sRGB";this._refWhiteName="D65";this._refWhiteNameUSER="";this._adtAlg="Bradford";this._doAdapta=true;this._doAdaptaUSER=0;this._dLV=1;this._COLORSPACES={sRGB:"sRGB",AdobeRGB:"AdobeRGB",AppleRGB:"AppleRGB",BestRGB:"BestRGB",BetaRGB:"BetaRGB",BruceRGB:"BruceRGB",CIERGB:"CIERGB",ColorMatchRGB:"ColorMatchRGB",ECIRGBv2:"ECIRGBv2",DonRGB4:"DonRGB4",EktaSpacePS5:"EktaSpacePS5",NTSCRGB:"NTSCRGB",PALSECAMRGB:"PALSECAMRGB",ProPhotoRGB:"ProPhotoRGB",SMPTECRGB:"SMPTECRGB",WideGamutRGB:"WideGamutRGB"};this._REFWHITES={A:"A",B:"B",C:"C",D50:"D50",D55:"D55",D65:"D65",D75:"D75",E:"E",F2:"F2",F7:"F7",F11:"F11"};this._adt_refWhite={X:0,Y:0,Z:0};this._adt_refWhiteRGB={X:0,Y:0,Z:0};this._adt_mtxAdaptMa=[[1,0,0],[0,1,0],[0,0,1]];this._adt_mtxAdaptMaI=[[1,0,0],[0,1,0],[0,0,1]];this._rgbX(arguments,this._COLORSPACES.sRGB)}ColorRNA.prototype._RGBstring=function(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)};ColorRNA.prototype._arrayProduct=function(c,a){var b=0;for(var d=0;d<c.length;d++){b+=c[d]*a[d]}return b};ColorRNA.prototype._normaliz=function(a,b,e,c){var d=0;if(arguments.length==4){d=(a-b)/(e-b);d=d*c}else{d=arguments[0]/255}return d};ColorRNA.prototype._normalizArray=function(d,a,e,c){for(var b=0;b<d.length;b++){d[b]=this._normaliz(d[b],a,e,c)}return d};ColorRNA.prototype._arrayFixed=function(b,a){for(var c=0;c<b.length;c++){b[c]=+b[c].toFixed(a)}};ColorRNA.prototype._arrayRound=function(a){for(var b=0;b<a.length;b++){a[b]=Math.round(a[b])}};ColorRNA.prototype._enGamma=function(b){var c=0;var a=1;if(b<0){a=-1;b=-b}if(this._gamma<0){if(b<=0.0031306684425005883){c=a*b*12.92}else{c=a*1.055*Math.pow(b,0.4166666666666667)-0.055}}if(this._gamma==0){if(b<=(216/24389)){c=a*(b*24389/2700)}else{c=a*(1.16*Math.pow(b,1/3)-0.16)}}if(this._gamma>0){c=a*Math.pow(b,1/this._gamma)}return c};ColorRNA.prototype._adt_adaptation=function(c,h){this._adt_setRefWhite(c);this._adt_setAdaptMa(h);var a=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][0];var l=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][1];var i=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][2];var j=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][0];var b=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][1];var m=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][2];var f=this._xyz.X*this._adt_mtxAdaptMa[0][0]+this._xyz.Y*this._adt_mtxAdaptMa[1][0]+this._xyz.Z*this._adt_mtxAdaptMa[2][0];var e=this._xyz.X*this._adt_mtxAdaptMa[0][1]+this._xyz.Y*this._adt_mtxAdaptMa[1][1]+this._xyz.Z*this._adt_mtxAdaptMa[2][1];var d=this._xyz.X*this._adt_mtxAdaptMa[0][2]+this._xyz.Y*this._adt_mtxAdaptMa[1][2]+this._xyz.Z*this._adt_mtxAdaptMa[2][2];f*=(a/j);e*=(l/b);d*=(i/m);var g=f*this._adt_mtxAdaptMaI[0][0]+e*this._adt_mtxAdaptMaI[1][0]+d*this._adt_mtxAdaptMaI[2][0];var n=f*this._adt_mtxAdaptMaI[0][1]+e*this._adt_mtxAdaptMaI[1][1]+d*this._adt_mtxAdaptMaI[2][1];var k=f*this._adt_mtxAdaptMaI[0][2]+e*this._adt_mtxAdaptMaI[1][2]+d*this._adt_mtxAdaptMaI[2][2];return[g,n,k]};ColorRNA.prototype._adt_invAdaptation=function(m,c,e){this._adt_setRefWhite(c);this._adt_setAdaptMa(e);var h=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][0];var b=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][1];var l=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][2];var a=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][0];var k=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][1];var g=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][2];var f=m[0]*this._adt_mtxAdaptMa[0][0]+m[1]*this._adt_mtxAdaptMa[1][0]+m[2]*this._adt_mtxAdaptMa[2][0];var o=m[0]*this._adt_mtxAdaptMa[0][1]+m[1]*this._adt_mtxAdaptMa[1][1]+m[2]*this._adt_mtxAdaptMa[2][1];var j=m[0]*this._adt_mtxAdaptMa[0][2]+m[1]*this._adt_mtxAdaptMa[1][2]+m[2]*this._adt_mtxAdaptMa[2][2];f*=(a/h);o*=(k/b);j*=(g/l);var d=f*this._adt_mtxAdaptMaI[0][0]+o*this._adt_mtxAdaptMaI[1][0]+j*this._adt_mtxAdaptMaI[2][0];var n=f*this._adt_mtxAdaptMaI[0][1]+o*this._adt_mtxAdaptMaI[1][1]+j*this._adt_mtxAdaptMaI[2][1];var i=f*this._adt_mtxAdaptMaI[0][2]+o*this._adt_mtxAdaptMaI[1][2]+j*this._adt_mtxAdaptMaI[2][2];return[d,n,i]};ColorRNA.prototype._adt_setRefWhite=function(a){if(this._refWhiteNameUSER.length>0){a=this._refWhiteNameUSER}this._adt_refWhite.Y=1;switch(a){case"A":this._adt_refWhite.X=1.0985;this._adt_refWhite.Z=0.35585;break;case"B":this._adt_refWhite.X=0.99072;this._adt_refWhite.Z=0.85223;break;case"C":this._adt_refWhite.X=0.98074;this._adt_refWhite.Z=1.18232;break;case"D50":this._adt_refWhite.X=0.96422;this._adt_refWhite.Z=0.82521;break;case"D55":this._adt_refWhite.X=0.95682;this._adt_refWhite.Z=0.92149;break;case"D65":this._adt_refWhite.X=0.95047;this._adt_refWhite.Z=1.08883;break;case"D75":this._adt_refWhite.X=0.94972;this._adt_refWhite.Z=1.22638;break;case"E":this._adt_refWhite.X=1;this._adt_refWhite.Z=1;break;case"F2":this._adt_refWhite.X=0.99186;this._adt_refWhite.Z=0.67393;break;case"F7":this._adt_refWhite.X=0.95041;this._adt_refWhite.Z=1.08747;break;case"F11":this._adt_refWhite.X=1.00962;this._adt_refWhite.Z=0.6435;break}};ColorRNA.prototype._adt_setAdaptMa=function(a){switch(a){case"Bradford":this._adt_mtxAdaptMa=[[0.8951,-0.7502,0.0389],[0.2664,1.7135,-0.0685],[-0.1614,0.0367,1.0296]];this._adt_mtxAdaptMaI=[[0.9869929054667123,0.43230526972339456,-0.008528664575177328],[-0.14705425642099013,0.5183602715367776,0.04004282165408487],[0.15996265166373125,0.0492912282128556,0.9684866957875502]];break;case"vonKries":this._adt_mtxAdaptMa=[[0.40024,-0.2263,0],[0.7076,1.16532,0],[-0.08081,0.0457,0.91822]];this._adt_mtxAdaptMaI=[[1.8599363874558397,0.3611914362417676,-0],[-1.1293816185800916,0.6388124632850422,-0],[0.21989740959619328,-0.000006370596838650885,1.0890636230968613]];break;case"none":this._adt_mtxAdaptMa=[[1,0,0],[0,1,0],[0,0,1]];this._adt_mtxAdaptMaI=[[1,0,0],[0,1,0],[0,0,1]];break}};ColorRNA.prototype._deGamma=function(b){var c=0;var a=1;if(b<0){a=-1;b=-b}if(this._gamma<0){if(b<=0.0404482362771076){c=a*b/12.92}else{c=a*Math.pow((b+0.055)/1.055,2.4)}}if(this._gamma==0){if(b<=0.08){c=a*2700*b/24389}else{c=a*((((1000000*b+480000)*b+76800)*b+4096)/1560896)}}if(this._gamma>0){c=a*Math.pow(b,this._gamma)}return c};ColorRNA.prototype._getRGBnucleotids=function(a,b){this._adt_refWhiteRGB.Y=1;this._refWhiteName="D65";this._doAdapta=true;switch(a){case"sRGB":this._gamma=-2.2;this._adt_refWhiteRGB.X=0.95047;this._adt_refWhiteRGB.Z=1.08883;if(b==true){if(this._dLV==2){return[[3.2404541621141045,-1.5371385127977166,-0.498531409556016],[-0.9692660305051868,1.8760108454466942,0.041556017530349834],[0.055643430959114726,-0.2040259135167538,1.0572251882231791]]}else{return[[3.2404542,-1.5371385,-0.4985314],[-0.969266,1.8760108,0.041556],[0.0556434,-0.2040259,1.0572252]]}break}if(this._dLV==2){return[[0.4124564390896922,0.357576077643909,0.18043748326639894],[0.21267285140562253,0.715152155287818,0.07217499330655958],[0.0193338955823293,0.11919202588130297,0.9503040785363679]]}else{return[[0.4124564,0.3575761,0.1804375],[0.2126729,0.7151522,0.072175],[0.0193339,0.119192,0.9503041]]}break;case"AdobeRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.95047;this._adt_refWhiteRGB.Z=1.08883;if(b==true){if(this._dLV==2){return[[2.041368979260079,-0.5649463871751954,-0.3446943843778483],[-0.9692660305051861,1.876010845446693,0.041556017530349786],[0.013447387216170255,-0.11838974235412553,1.0154095719504164]]}else{return[[2.041369,-0.5649464,-0.3446944],[-0.969266,1.8760108,0.041556],[0.0134474,-0.1183897,1.0154096]]}break}if(this._dLV==2){return[[0.5767308871981477,0.18555395071121408,0.18818516209063843],[0.29737686371154487,0.6273490714522,0.07527406483625537],[0.027034260337413143,0.0706872193185578,0.9911085203440292]]}else{return[[0.5767309,0.185554,0.1881852],[0.2973769,0.6273491,0.0752741],[0.0270343,0.0706872,0.9911085]]}break;case"AppleRGB":this._gamma=1.8;this._adt_refWhiteRGB.X=0.95047;this._adt_refWhiteRGB.Z=1.08883;if(b==true){if(this._dLV==2){return[[2.951537290948746,-1.2894115658994107,-0.473844478043996],[-1.0851093382231771,1.9908566080903682,0.037202561107440836],[0.08549335448914223,-0.26949635273220945,1.0912975249496382]]}else{return[[2.9515373,-1.2894116,-0.4738445],[-1.0851093,1.9908566,0.0372026],[0.0854934,-0.2694964,1.0912975]]}break}if(this._dLV==2){return[[0.4497288365610329,0.31624860938967136,0.1844925540492957],[0.24465248708920193,0.6720282949530516,0.08331921795774647],[0.025184814847417827,0.14118241490610328,0.9224627702464786]]}else{return[[0.4497288,0.3162486,0.1844926],[0.2446525,0.6720283,0.0833192],[0.0251848,0.1411824,0.9224628]]}break;case"BestRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[1.7552599329466554,-0.4836785613998958,-0.25300004986116026],[-0.5441336296844771,1.5068789209543363,0.021552825898898505],[0.00634673971374007,-0.01757613896601896,1.225695866021057]]}else{return[[1.7552599,-0.4836786,-0.253],[-0.5441336,1.5068789,0.0215528],[0.0063467,-0.0175761,1.2256959]]}break}if(this._dLV==2){return[[0.6326696499956765,0.20455579792131387,0.12699455208300955],[0.22845686422193134,0.7373522948326431,0.034190840945425655],[0,0.009514223159130886,0.8156957768408691]]}else{return[[0.6326696,0.2045558,0.1269946],[0.2284569,0.7373523,0.0341908],[0,0.0095142,0.8156958]]}break;case"BetaRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[1.6832269542614402,-0.4282362832078967,-0.2360184809079736],[-0.7710228944287557,1.7065571005222588,0.04468995133824896],[0.04000128943944507,-0.08853755837368198,1.272364022576533]]}else{return[[1.683227,-0.4282363,-0.2360185],[-0.7710229,1.7065571,0.04469],[0.0400013,-0.0885376,1.272364]]}break}if(this._dLV==2){return[[0.671253700292543,0.17458338980154234,0.11838290990591456],[0.30327257771637545,0.6637860908315439,0.03294133145208057],[5.409707559738789e-17,0.040700961469342455,0.7845090385306573]]}else{return[[0.6712537,0.1745834,0.1183829],[0.3032726,0.6637861,0.0329413],[0,0.040701,0.784509]]}break;case"BruceRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.95047;this._adt_refWhiteRGB.Z=1.08883;if(b==true){if(this._dLV==2){return[[2.745466866559799,-1.1358136045241505,-0.4350268528006593],[-0.9692660305051869,1.8760108454466942,0.04155601753034985],[0.011272295190850611,-0.1139754291519338,1.0132540899331266]]}else{return[[2.7454669,-1.1358136,-0.4350269],[-0.969266,1.8760108,0.041556],[0.0112723,-0.1139754,1.0132541]]}break}if(this._dLV==2){return[[0.4674161637795275,0.2944512299212599,0.18860260629921258],[0.24101145944881885,0.6835474980314961,0.07544104251968503],[0.021910132677165326,0.0736128074803149,0.9933070598425197]]}else{return[[0.4674162,0.2944512,0.1886026],[0.2410115,0.6835475,0.075441],[0.0219101,0.0736128,0.9933071]]}break;case"CIERGB":this._gamma=2.2;this._adt_refWhiteRGB.X=1;this._adt_refWhiteRGB.Z=1;if(b==true){if(this._dLV==2){return[[2.370674329102138,-0.9000405327854051,-0.4706337963167336],[-0.513884966581945,1.42530358655747,0.08858138002447524],[0.005298175073030407,-0.0146949384101032,1.0093967633370728]]}else{return[[2.3706743,-0.9000405,-0.4706338],[-0.513885,1.4253036,0.0885814],[0.0052982,-0.0146949,1.0093968]]}break}if(this._dLV==2){return[[0.48871796548117163,0.31068034326701394,0.20060169125181454],[0.1762044365340279,0.8129846938775509,0.010810869588421142],[0,0.010204828793442072,0.9897951712065579]]}else{return[[0.488718,0.3106803,0.2006017],[0.1762044,0.8129847,0.0108109],[0,0.0102048,0.9897952]]}break;case"ColorMatchRGB":this._gamma=1.8;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[2.6422874096694384,-1.2234270341709754,-0.39301430179044206],[-1.1119762771300263,2.059018273920192,0.01596138196837363],[0.08216985846755141,-0.2807254155216341,1.4559876814266082]]}else{return[[2.6422874,-1.223427,-0.3930143],[-1.1119763,2.0590183,0.0159614],[0.0821699,-0.2807254,1.4559877]]}break}if(this._dLV==2){return[[0.509343853397384,0.3209070884940387,0.13396905810857737],[0.2748839843731914,0.6581314865725201,0.06698452905428869],[0.024254469209399214,0.1087820638962844,0.6921734668943165]]}else{return[[0.5093439,0.3209071,0.1339691],[0.274884,0.6581315,0.0669845],[0.0242545,0.1087821,0.6921735]]}break;case"ECIRGBv2":this._gamma=0;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[1.7827617697270912,-0.49698473887532724,-0.2690100880150854],[-0.9593623286322266,1.9477962429805813,-0.027580735166583017],[0.08593169513496947,-0.17446738103160447,1.322827306926194]]}else{return[[1.7827618,-0.4969847,-0.2690101],[-0.9593623,1.9477962,-0.0275807],[0.0859317,-0.1744674,1.3228273]]}break}if(this._dLV==2){return[[0.650204257079646,0.1780773570796461,0.13593838584070797],[0.32024985796460176,0.6020710644121368,0.07767907762326169],[-5.3871025143217717e-17,0.06783899317319857,0.7573710068268015]]}else{return[[0.6502043,0.1780774,0.1359384],[0.3202499,0.6020711,0.0776791],[-0,0.067839,0.757371]]}break;case"DonRGB4":this._gamma=2.2;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[1.7603902333031187,-0.48811980100639313,-0.25361261951399006],[-0.7126287844544976,1.6527431594729967,0.041671534607820124],[0.00782073858032594,-0.03474110403369325,1.244774289550262]]}else{return[[1.7603902,-0.4881198,-0.2536126],[-0.7126288,1.6527432,0.0416715],[0.0078207,-0.0347411,1.2447743]]}break}if(this._dLV==2){return[[0.645771138436728,0.19335110357732524,0.12509775798594666],[0.2783496286365207,0.6879702057518782,0.033680165611601025],[0.0037113283818203304,0.01798614916998376,0.8035125224481958]]}else{return[[0.6457711,0.1933511,0.1250978],[0.2783496,0.6879702,0.0336802],[0.0037113,0.0179861,0.8035125]]}break;case"EktaSpacePS5":this._gamma=2.2;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[2.0043819420638203,-0.7304844248729281,-0.24500518813859393],[-0.7110285484718862,1.6202125940588885,0.07922268628430854],[0.038126311068521795,-0.0868779875167958,1.2725437595985338]]}else{return[[2.0043819,-0.7304844,-0.2450052],[-0.7110285,1.6202126,0.0792227],[0.0381263,-0.086878,1.2725438]]}break}if(this._dLV==2){return[[0.5938913615570769,0.2729801227546152,0.09734851568830809],[0.26062858312936465,0.7349464843393485,0.004424932531286731],[4.743538587961513e-17,0.04199694196224853,0.7832130580377514]]}else{return[[0.5938914,0.2729801,0.0973485],[0.2606286,0.7349465,0.0044249],[0,0.0419969,0.7832131]]}break;case"NTSCRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.98074;this._adt_refWhiteRGB.Z=1.18232;if(b==true){if(this._dLV==2){return[[1.9099960989184541,-0.5324541554529706,-0.2882091300158282],[-0.9846663050051847,1.9991709828893145,-0.02830819991079395],[0.0583056402155416,-0.11837811801337218,0.8975534918028807]]}else{return[[1.9099961,-0.5324542,-0.2882091],[-0.9846663,1.999171,-0.0283082],[0.0583056,-0.1183781,0.8975535]]}break}if(this._dLV==2){return[[0.6068909212389378,0.1735011212389381,0.20034795752212392],[0.2989164238938052,0.5865990289506955,0.11448454715549937],[-5.028240852204785e-17,0.06609566523388125,1.116224334766119]]}else{return[[0.6068909,0.1735011,0.200348],[0.2989164,0.586599,0.1144845],[-0,0.0660957,1.1162243]]}break;case"PALSECAMRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.95047;this._adt_refWhiteRGB.Z=1.08883;if(b==true){if(this._dLV==2){return[[3.0628971232226965,-1.393179136493678,-0.4757516712579541],[-0.9692660305051867,1.876010845446694,0.04155601753034983],[0.06787750995175175,-0.22885477399033227,1.0693489682562851]]}else{return[[3.0628971,-1.3931791,-0.4757517],[-0.969266,1.8760108,0.041556],[0.0678775,-0.2288548,1.069349]]}break}if(this._dLV==2){return[[0.4306190335097004,0.3415419122574957,0.17830905423280421],[0.22203793915343925,0.7066384391534394,0.07132362169312169],[0.020185267195767184,0.12955038051146386,0.9390943522927689]]}else{return[[0.430619,0.3415419,0.1783091],[0.2220379,0.7066384,0.0713236],[0.0201853,0.1295504,0.9390944]]}break;case"ProPhotoRGB":this._gamma=1.8;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[1.3459433009386654,-0.25560750931676696,-0.05111176587088495],[-0.544598869458717,1.508167317720767,0.020535141586646915],[0,-0,1.2118127506937628]]}else{return[[1.3459433,-0.2556075,-0.0511118],[-0.5445989,1.5081673,0.0205351],[0,0,1.2118128]]}break}if(this._dLV==2){return[[0.7976749444306044,0.13519170147409815,0.031353354095297416],[0.2880402378623102,0.7118740972357901,0.00008566490189971971],[0,0,0.82521]]}else{return[[0.7976749,0.1351917,0.0313534],[0.2880402,0.7118741,0.0000857],[0,0,0.82521]]}break;case"SMPTECRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.95047;this._adt_refWhiteRGB.Z=1.08883;if(b==true){if(this._dLV==2){return[[3.505395974670056,-1.7394893606633242,-0.543964026874098],[-1.0690722072799321,1.9778244814100043,0.035172230231857005],[0.056320014767146896,-0.1970226122130985,1.0502026283050325]]}else{return[[3.505396,-1.7394894,-0.543964],[-1.0690722,1.9778245,0.0351722],[0.05632,-0.1970226,1.0502026]]}break}if(this._dLV==2){return[[0.3935890809541021,0.365249655704132,0.19163126334176603],[0.21241315480062656,0.7010436940127694,0.08654315118660402],[0.018742337188290558,0.11193134610287912,0.9581563167088301]]}else{return[[0.3935891,0.3652497,0.1916313],[0.2124132,0.7010437,0.0865432],[0.0187423,0.1119313,0.9581563]]}break;case"WideGamutRGB":this._gamma=2.2;this._adt_refWhiteRGB.X=0.96422;this._adt_refWhiteRGB.Z=0.82521;if(b==true){if(this._dLV==2){return[[1.4628067131216802,-0.18406234137547003,-0.27436064462466103],[-0.5217933153765428,1.447238063402864,0.06772274590650387],[0.034934211112166366,-0.09689300063185764,1.2884099024409357]]}else{return[[1.4628067,-0.1840623,-0.2743606],[-0.5217933,1.4472381,0.0677227],[0.0349342,-0.096893,1.2884099]]}break}if(this._dLV==2){return[[0.7161045686144476,0.10092960102210317,0.1471858303634494],[0.25818736147323623,0.7249378299500627,0.016874808576701202],[0,0.05178127356786167,0.7734287264321384]]}else{return[[0.7161046,0.1009296,0.1471858],[0.2581874,0.7249378,0.0168748],[0,0.0517813,0.7734287]]}break}};ColorRNA.prototype._RGB_to_YPbPr=function(b){b=this._normalizArray(b,0,255,1);var d=0.299*b[0]+0.587*b[1]+0.114*b[2],c=-0.1687367*b[0]-0.331264*b[1]+0.5*b[2],a=0.5*b[0]-0.418688*b[1]-0.081312*b[2];return[d,c,a]};ColorRNA.prototype._YPbPr_to_RGB_=function(c){var e=0.9999999999991468*c[0]-0.0000012188941887145875*c[1]+1.401999588656144*c[2],d=0.9999997591050251*c[0]-0.34413567816504304*c[1]-0.7141364933164679*c[2],a=1.0000012404000462*c[0]+1.772000066072304*c[1]+0.0000021453384174593273*c[2];return this._normalizArray([e,d,a],0,1,255)};ColorRNA.prototype._RGB_to_YCbCr=function(b){b=this._normalizArray(b,0,255,1);var d=65.481*b[0]+128.553*b[1]+24.966*b[2]+16,a=-37.797*b[0]-74.203*b[1]+112*b[2]+128,c=112*b[0]-93.786*b[1]-18.214*b[2]+128;return[d,a,c]};ColorRNA.prototype._YCbCr_to_RGB=function(c){c[0]-=16;c[1]-=128;c[2]-=128;var e=0.004566210045662101*c[0]+1.1808799897946416e-9*c[1]+0.006258928969943936*c[2],d=0.004566210045662101*c[0]-0.0015363236860449021*c[1]-0.003188110949655707*c[2],a=0.004566210045662101*c[0]+0.007910716233554741*c[1]+1.1977497040190077e-8*c[2];return this._normalizArray([e,d,a],0,1,255)};ColorRNA.prototype._RGB_to_JpegYCbCr=function(c){var b=this._RGB_to_YPbPr(c);var e=b[0],a=b[1]+0.5,d=b[2]+0.5;return[e,a,d]};ColorRNA.prototype._JpegYCbCr_to_RGB=function(b){var a=this._YPbPr_to_RGB_([b[0],b[1]-0.5,b[2]-0.5]);return a};ColorRNA.prototype._RGB_to_YIQ=function(b){b=this._normalizArray(b,0,255,1);var d=0.299*b[0]+0.587*b[1]+0.114*b[2],a=0.595716*b[0]-0.274453*b[1]-0.321263*b[2],c=0.211456*b[0]-0.522591*b[1]+0.311135*b[2];return[d,a,c]};ColorRNA.prototype._YIQ_to_RGB=function(c){var e=c[0]+0.9562957197589482*c[1]+0.6210244164652611*c[2],d=c[0]-0.27212209931851045*c[1]-0.647380596825695*c[2],a=c[0]-1.1069890167364902*c[1]+1.7046149983646481*c[2];return this._normalizArray([e,d,a],0,1,255)};ColorRNA.prototype._RGB_to_YUV=function(c){c=this._normalizArray(c,0,255,1);var d=0.299*c[0]+0.587*c[1]+0.114*c[2],b=-0.147*c[0]-0.289*c[1]+0.436*c[2],a=0.615*c[0]-0.515*c[1]-0.1*c[2];return[d,b,a]};ColorRNA.prototype._YUV_to_RGB=function(c){var e=c[0]-0.00003945707070708279*c[1]+1.139827967171717*c[2],d=c[0]-0.39461016414141414*c[1]-0.5805003156565657*c[2],a=c[0]+2.0319996843434343*c[1]-0.0004813762626262513*c[2];return this._normalizArray([e,d,a],0,1,255)};ColorRNA.prototype._RGB_to_HSL=function(m,e){m=this._normalizArray(m,0,255,1);var a,j,o,i,p,c,k,n,f;a=m[0];j=m[1];o=m[2];n=Math.max(a,j,o);f=Math.min(a,j,o);c=(n+f)/2;if(n===f){i=p=0}else{k=n-f;p=c>0.5?k/(2-n-f):k/(n+f);switch(n){case a:i=(j-o)/k+(j<o?6:0);break;case j:i=(o-a)/k+2;break;case o:i=(a-j)/k+4;break}i/=6}i=i*360;p=p*100;c=c*100;if(e!=true){i=Math.round(i);p=Math.round(p);c=Math.round(c)}return[i,p,c]};ColorRNA.prototype._HSL_to_RGB=function(f){var i=f[0],o=this._normaliz(f[1],0,100,1),e=this._normaliz(f[2],0,100,1);if(i==undefined){return[0,0,0]}var c=(1-Math.abs((2*e)-1))*o;var d=i/60;var n=c*(1-Math.abs((d%2)-1));d=Math.floor(d);var a;var j;var k;if(d===0){a=c;j=n;k=0}else{if(d===1){a=n;j=c;k=0}else{if(d===2){a=0;j=c;k=n}else{if(d===3){a=0;j=n;k=c}else{if(d===4){a=n;j=0;k=c}else{if(d===5){a=c;j=0;k=n}}}}}}var m=e-(c/2);a+=m;j+=m;k+=m;return this._normaOutRGB(this._normalizArray([a,j,k],0,1,255))};ColorRNA.prototype._RGB_to_HSL_255=function(b){var a=this._RGB_to_HSL(b,true);a[0]=Math.round(this._normaliz(a[0],0,360,255));a[1]=Math.round(this._normaliz(a[1],0,100,255));a[2]=Math.round(this._normaliz(a[2],0,100,255));return a};ColorRNA.prototype._HSL_to_RGB_255=function(b){var a=[0,0,0];a[0]=Math.round(this._normaliz(b[0],0,255,360)),a[1]=Math.round(this._normaliz(b[1],0,255,100)),a[2]=Math.round(this._normaliz(b[2],0,255,100));var c=this._HSL_to_RGB(a);return c};ColorRNA.prototype._RGB_to_HSL_win239=function(b){var a=this._RGB_to_HSL(b,true);a[0]=Math.round(this._normaliz(a[0],0,360,239));a[1]=Math.round(this._normaliz(a[1],0,100,240));a[2]=Math.round(this._normaliz(a[2],0,100,240));return a};ColorRNA.prototype._HSL_to_RGB_win240=function(b){var a=[0,0,0];a[0]=Math.round(this._normaliz(b[0],0,239,360)),a[1]=Math.round(this._normaliz(b[1],0,240,100)),a[2]=Math.round(this._normaliz(b[2],0,240,100));var c=this._HSL_to_RGB(a);return c};ColorRNA.prototype._RGB_to_HSV=function(j){var l,c,e,n,m,i,a=this._normaliz(j[0],0,255,1),f=this._normaliz(j[1],0,255,1),k=this._normaliz(j[2],0,255,1);l=Math.max(a,f,k);c=Math.min(a,f,k);m=l;i=l-c;n=l===0?0:i/l;if(l===c){e=0}else{switch(l){case a:e=(f-k)/i+(f<k?6:0);break;case f:e=(k-a)/i+2;break;case k:e=(a-f)/i+4;break}e/=6}e=Math.round(e*360);n=Math.round(n*100);m=Math.round(m*100);return[e,n,m]};ColorRNA.prototype._HSV_to_RGB=function(c){var a,l,n,j,m,e,d,u;if(o===0){return[0,0,0]}var w=this._normaliz(c[1],0,100,1),o=this._normaliz(c[2],0,100,1),k=c[0]/60;j=Math.floor(k);m=k-j;e=o*(1-w);d=o*(1-(w*m));u=o*(1-(w*(1-m)));switch(j){case 0:a=o;l=u;n=e;break;case 1:a=d;l=o;n=e;break;case 2:a=e;l=o;n=u;break;case 3:a=e;l=d;n=o;break;case 4:a=u;l=e;n=o;break;case 5:a=o;l=e;n=d;break}return this._normaOutRGB(this._normalizArray([a,l,n],0,1,255))};ColorRNA.prototype._RGB_to_HWB=function(c){var b=this._RGB_to_HSV(c);var d,a,e;d=b[0];a=Math.round(((100-b[1])*b[2])/100);e=Math.round(100-b[2]);return[d,a,e]};ColorRNA.prototype._HWB_to_RGB=function(e){var d,c,a;d=e[0];c=100-(e[1]/(100-e[2])*100);a=100-e[2];var b=this._HSV_to_RGB([d,c,a]);return b};ColorRNA.prototype._RGB_to_CMY=function(a){var c=1-(a[0]/255),d=1-(a[1]/255),b=1-(a[2]/255);c=Math.round(c*100);d=Math.round(d*100);b=Math.round(b*100);return[c,d,b]};ColorRNA.prototype._CMY_to_RGB=function(c){var e=c[0]/100,g=c[1]/100,d=c[2]/100;var b=Math.round(Math.max(0,(1-e)*255)),a=Math.round(Math.max(0,(1-g)*255)),f=Math.round(Math.max(0,(1-d)*255));return[b,a,f]};ColorRNA.prototype._CMY_to_CMYK=function(b){var d=b[0]/100;var e=b[1]/100;var c=b[2]/100;var a=Math.min(c,Math.min(e,Math.min(d,1)));d=Math.round((d-a)/(1-a)*100);e=Math.round((e-a)/(1-a)*100);c=Math.round((c-a)/(1-a)*100);a=Math.round(a*100);return[d,e,c,a]};ColorRNA.prototype._CMYK_to_CMY=function(a){var c=a[0]/100*(1-a[3]/100)+a[3]/100,d=a[1]/100*(1-a[3]/100)+a[3]/100,b=a[2]/100*(1-a[3]/100)+a[3]/100;return[Math.round(c*100),Math.round(d*100),Math.round(b*100)]};ColorRNA.prototype._RGB_to_CMYK=function(a){return this._CMY_to_CMYK(this._RGB_to_CMY(a))};ColorRNA.prototype._CMYK_to_RGB=function(a){return this._CMY_to_RGB(this._CMYK_to_CMY(a))};ColorRNA.prototype._RGB_to_XYZ=function(){var a,f,e;var b=this._getRGBnucleotids(this._colorSpace);var c=[this._deGamma(this._normaliz(this.r)),this._deGamma(this._normaliz(this.g)),this._deGamma(this._normaliz(this.b))];a=this._arrayProduct(c,b[0]);f=this._arrayProduct(c,b[1]);e=this._arrayProduct(c,b[2]);this._xyz.X=a;this._xyz.Y=f;this._xyz.Z=e;if((this._doAdapta==true||this._doAdaptaUSER==1)&&this._doAdaptaUSER!=-1){var d=this._adt_adaptation(this._refWhiteName,this._adtAlg);this._xyz.X=d[0];this._xyz.Y=d[1];this._xyz.Z=d[2]}return[this._xyz.X,this._xyz.Y,this._xyz.Z]};ColorRNA.prototype._XYZ_to_RGB=function(){var b=this._getRGBnucleotids(this._colorSpace,true);var f=[this._xyz.X,this._xyz.Y,this._xyz.Z];if((this._doAdapta==true||this._doAdaptaUSER==1)&&this._doAdaptaUSER!=-1){f=this._adt_invAdaptation(f,this._refWhiteName,this._adtAlg)}var e,d,a;e=this._arrayProduct(f,b[0]);d=this._arrayProduct(f,b[1]);a=this._arrayProduct(f,b[2]);var c=[this._normaliz(this._enGamma(e),0,1,255),this._normaliz(this._enGamma(d),0,1,255),this._normaliz(this._enGamma(a),0,1,255)];this._arrayRound(c);return c};ColorRNA.prototype._XYZ_to_Lab=function(a){var i=[this._xyz.X,this._xyz.Y,this._xyz.Z];var j=0.008856451679;var g=903.2962962963;this._adt_setRefWhite("D65");if(a===true){this._getRGBnucleotids("sRGB");i=this._adt_adaptation("D50",this._adtAlg)}var e=i[0]/this._adt_refWhite.X;var k=i[1]/this._adt_refWhite.Y;var h=i[2]/this._adt_refWhite.Z;var d=(e>j)?Math.pow(e,1/3):((g*e+16)/116);var c=(k>j)?Math.pow(k,1/3):((g*k+16)/116);var b=(h>j)?Math.pow(h,1/3):((g*h+16)/116);var f=[116*c-16,500*(d-c),200*(c-b)];return f};ColorRNA.prototype._LCHab_to_XYZ=function(b){var a=[0,0,0];a[0]=b[0];a[1]=b[1]*Math.cos(b[2]*Math.PI/180);a[2]=b[1]*Math.sin(b[2]*Math.PI/180);return this._Lab_to_XYZ(a,false)};ColorRNA.prototype._XYZ_to_LCHab=function(){var a=this._XYZ_to_Lab(a,false);var b=[0,0,0];b[0]=a[0];b[1]=Math.sqrt(a[1]*a[1]+a[2]*a[2]);b[2]=180*Math.atan2(a[2],a[1])/Math.PI;if(b[2]<0){b[2]+=360}return b};ColorRNA.prototype._Lab_to_XYZ=function(c,a){var m=[0,0,0];var n=0.008856451679;var j=903.2962962963;var b=8;var k={L:c[0],a:c[1],b:c[2]};var f=(k.L+16)/116;var h=0.002*k.a+f;var e=f-0.005*k.b;var d=h*h*h;var i=e*e*e;var g=(d>n)?d:((116*h-16)/j);var o=(k.L>b)?Math.pow((k.L+16)/116,3):(k.L/j);var l=(i>n)?i:((116*e-16)/j);if(a===true){this._adt_setRefWhite("D50")}else{this._adt_setRefWhite("D65")}m[0]=g*this._adt_refWhite.X;m[1]=o*this._adt_refWhite.Y;m[2]=l*this._adt_refWhite.Z;this._xyz.X=m[0];this._xyz.Y=m[1];this._xyz.Z=m[2];if(a===true){this._getRGBnucleotids("sRGB");m=this._adt_invAdaptation(m,"D50",this._adtAlg)}this._xyz.X=m[0];this._xyz.Y=m[1];this._xyz.Z=m[2];return[this._xyz.X,this._xyz.Y,this._xyz.Z]};ColorRNA.prototype._XYZ_to_xyY=function(){var a=[0,0,0];var b=this._xyz.X+this._xyz.Y+this._xyz.Z;if(b>0){a[0]=this._xyz.X/b;a[1]=this._xyz.Y/b}else{this._adt_setRefWhite(this._refWhiteName);a[0]=this._adt_refWhite.X/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z);a[1]=this._adt_refWhite.Y/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z)}a[2]=this._xyz.Y;return a};ColorRNA.prototype._xyY_to_XYZ=function(a){var b=[0,0,0];if(a[1]<0.000001){b[0]=b[1]=b[2]=0}else{b[0]=(a[0]*a[2])/a[1];b[1]=a[2];b[2]=((1-a[0]-a[1])*a[2])/a[1]}this._xyz.X=b[0];this._xyz.Y=b[1];this._xyz.Z=b[2];return b};ColorRNA.prototype._xyY_to_Wavelength=function(A){var r=A[0],p=A[1],q=this._adt_refWhite.X/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z),C=this._adt_refWhite.Y/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z);var g;var o=0;var H=[0,0];var m=[0,0];var w=[0,0];var i;var M=r-q;var L=p-C;if((M>=-0.000001)&&(M<=0.000001)&&(L>=-0.000001)&&(L<=0.000001)){return(0)}for(i=360;i<=830;i+=5){var B=(i-360)/5;var z=(i==830)?0:B+1;var K=5*z+360;var n=[0.0001299,0.0002321,0.0004149,0.0007416,0.001368,0.002236,0.004243,0.00765,0.01431,0.02319,0.04351,0.07763,0.13438,0.21477,0.2839,0.3285,0.34828,0.34806,0.3362,0.3187,0.2908,0.2511,0.19536,0.1421,0.09564,0.05795001,0.03201,0.0147,0.0049,0.0024,0.0093,0.0291,0.06327,0.1096,0.1655,0.2257499,0.2904,0.3597,0.4334499,0.5120501,0.5945,0.6784,0.7621,0.8425,0.9163,0.9786,1.0263,1.0567,1.0622,1.0456,1.0026,0.9384,0.8544499,0.7514,0.6424,0.5419,0.4479,0.3608,0.2835,0.2187,0.1649,0.1212,0.0874,0.0636,0.04677,0.0329,0.0227,0.01584,0.01135916,0.008110916,0.005790346,0.004109457,0.002899327,0.00204919,0.001439971,0.0009999493,0.0006900786,0.0004760213,0.0003323011,0.0002348261,0.0001661505,0.000117413,0.00008307527,0.00005870652,0.00004150994,0.00002935326,0.00002067383,0.00001455977,0.00001025398,0.000007221456,0.000005085868,0.000003581652,0.000002522525,0.000001776509,0.000001251141];var l=[0.000003917,0.000006965,0.00001239,0.00002202,0.000039,0.000064,0.00012,0.000217,0.000396,0.00064,0.00121,0.00218,0.004,0.0073,0.0116,0.01684,0.023,0.0298,0.038,0.048,0.06,0.0739,0.09098,0.1126,0.13902,0.1693,0.20802,0.2586,0.323,0.4073,0.503,0.6082,0.71,0.7932,0.862,0.9148501,0.954,0.9803,0.9949501,1,0.995,0.9786,0.952,0.9154,0.87,0.8163,0.757,0.6949,0.631,0.5668,0.503,0.4412,0.381,0.321,0.265,0.217,0.175,0.1382,0.107,0.0816,0.061,0.04458,0.032,0.0232,0.017,0.01192,0.00821,0.005723,0.004102,0.002929,0.002091,0.001484,0.001047,0.00074,0.00052,0.0003611,0.0002492,0.0001719,0.00012,0.0000848,0.00006,0.0000424,0.00003,0.0000212,0.00001499,0.0000106,0.0000074657,0.0000052578,0.0000037029,0.0000026078,0.0000018366,0.0000012934,9.1093e-7,6.4153e-7,4.5181e-7];var k=[0.0006061,0.001086,0.001946,0.003486,0.006450001,0.01054999,0.02005001,0.03621,0.06785001,0.1102,0.2074,0.3713,0.6456,1.0390501,1.3856,1.62296,1.74706,1.7826,1.77211,1.7441,1.6692,1.5281,1.28764,1.0419,0.8129501,0.6162,0.46518,0.3533,0.272,0.2123,0.1582,0.1117,0.07824999,0.05725001,0.04216,0.02984,0.0203,0.0134,0.008749999,0.005749999,0.0039,0.002749999,0.0021,0.0018,0.001650001,0.0014,0.0011,0.001,0.0008,0.0006,0.00034,0.00024,0.00019,0.0001,0.00004999999,0.00003,0.00002,0.00001,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var E=n[B]/(n[B]+l[B]+k[B]);var j=l[B]/(n[B]+l[B]+k[B]);var D=n[z]/(n[z]+l[z]+k[z]);var h=l[z]/(n[z]+l[z]+k[z]);var J=E-q;var I=j-C;var G=D-E;var F=h-j;var v=(M*I-L*J)/(L*G-M*F);if((v<0)||(v>=1)){continue}var u=(Math.abs(M)>=Math.abs(L))?((G*v+J)/M):((F*v+I)/L);H[o]=u;w[o]=i;m[o]=(K-i)*v+i;o+=1}if((w[1]==830)&&(H[1]>0)){g=-m[0]}else{g=(H[0]>=0)?m[0]:m[1]}return(g)};ColorRNA.prototype._XYZ_to_Luv=function(){var f=[0,0,0];var g=216/24389;var e=24389/27;var c=8;this._adt_setRefWhite("D65");var h=this._xyz.X+15*this._xyz.Y+3*this._xyz.Z;var d=(h>0)?((4*this._xyz.X)/(this._xyz.X+15*this._xyz.Y+3*this._xyz.Z)):0;var a=(h>0)?((9*this._xyz.Y)/(this._xyz.X+15*this._xyz.Y+3*this._xyz.Z)):0;var i=(4*this._adt_refWhite.X)/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z);var b=(9*this._adt_refWhite.Y)/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z);var j=this._xyz.Y/this._adt_refWhite.Y;f[0]=(j>g)?(116*Math.pow(j,1/3)-16):(e*j);f[1]=13*f[0]*(d-i);f[2]=13*f[0]*(a-b);return f};ColorRNA.prototype._Luv_to_XYZ=function(k){var h=24389/27;var e=8;var g={X:0,Y:0,Z:0};this._adt_setRefWhite("D65");g.Y=(k[0]>e)?Math.pow((k[0]+16)/116,3):(k[0]/h);var f=(4*this._adt_refWhite.X)/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z);var n=(9*this._adt_refWhite.Y)/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z);var m=(((52*k[0])/(k[1]+13*k[0]*f))-1)/3;var l=-5*g.Y;var j=-1/3;var i=g.Y*(((39*k[0])/(k[2]+13*k[0]*n))-5);g.X=(i-l)/(m-j);g.Z=g.X*m+l;this._xyz.X=g.X;this._xyz.Y=g.Y;this._xyz.Z=g.Z};ColorRNA.prototype._hex_to_rgb=function(e){var d,c,a;if(e.length==3){d=parseInt((e.slice(0,1)+e.slice(0,1)),16);c=parseInt((e.slice(1,2)+e.slice(1,2)),16);a=parseInt((e.slice(2,3)+e.slice(2,3)),16)}else{if(e.length==6){d=parseInt((e.slice(0,2)),16);c=parseInt((e.slice(2,4)),16);a=parseInt((e.slice(4,6)),16)}}return[d,c,a]};ColorRNA.prototype._rgb_to_hex=function(a){var b=a[0]*65536+a[1]*256+a[2];b=b.toString(16).toUpperCase();while(b.length<6){b="0"+b}return b.toString(16).toUpperCase()};ColorRNA.prototype._normaInputRGB=function(c){var b=false;var d=0;var a="";if(c.length==3){if(c[1]>1&&c[1]>1&&c[1]>1){return c}for(d=0;d<c.length;d++){if(String(c[d]).indexOf(".")>-1){b=true}}if(b==true){for(d=0;d<c.length;d++){c[d]=this._normaliz(c[d],0,1,255)}}}return c};ColorRNA.prototype._normaOutRGB=function(a){var b=0;for(b=0;b<a.length;b++){a[b]=Math.round(a[b]);if(a[b]<0||a[b]==-0){a[b]=0}}return a};ColorRNA.prototype._normaOutLab=function(b,a){var c=0;for(c=0;c<b.length;c++){if(a){b[c]=Math.round(b[c])}else{b[c]=+b[c].toFixed(4)}}return b};ColorRNA.prototype._normaOutX=function(a,c){var b=0;for(b=0;b<a.length;b++){a[b]=+a[b].toFixed(c)}return a};ColorRNA.prototype._normaInputXYZ=function(a){var b=0;if(a[0]>1||a[1]>1||a[2]>1){for(b=0;b<a.length;b++){a[b]=a[b]/100}}return a};ColorRNA.prototype.setRefWhite=function(a){if(arguments.length==0){this._refWhiteNameUSER=""}else{this._refWhiteNameUSER=a}return this};ColorRNA.prototype.getRefWhite=function(){if(this._refWhiteNameUSER.length>0){return this._refWhiteNameUSER}return this._refWhiteName};ColorRNA.prototype.rgb=function(){return(this._rgbX(arguments,this._COLORSPACES.sRGB))};ColorRNA.prototype._rgbX=function(a,c){var b=[0,0,0];this._colorSpace=c;if(a.length==0){b=this._XYZ_to_RGB();return this._normaOutRGB(b)}if(a.length==1){if(Array.isArray(a[0])){if(a[0].length==3){b=a[0]}}else{if(a[0].slice(0,1)=="#"){b=this._hex_to_rgb(a[0].slice(1,a[0].length))}}}if(a.length==3){b[0]=a[0];b[1]=a[1];b[2]=a[2]}this._normaInputRGB(b);this.r=b[0];this.g=b[1];this.b=b[2];this._RGB_to_XYZ();return this};ColorRNA.prototype._LabX=function(b,c){var a=[0,0,0];if(b.length==0){a=this._XYZ_to_Lab(c);this._normaOutLab(a,c);return a}if(b.length==1){if(Array.isArray(b[0])){if(b[0].length==3){a=b[0]}}}if(b.length==3){a[0]=b[0];a[1]=b[1];a[2]=b[2]}this._Lab_to_XYZ(a,c);return this};ColorRNA.prototype._xyYX=function(a){var b=[0,0,0];if(a.length==0){b=this._XYZ_to_xyY();this._normaOutX(b,4);return b}if(a.length==1){if(Array.isArray(a[0])){if(a[0].length==3){b=a[0]}}}if(a.length==3){b[0]=a[0];b[1]=a[1];b[2]=a[2]}this._xyY_to_XYZ(b);return this};ColorRNA.prototype._LCHabX=function(a){var b=[0,0,0];if(a.length==0){b=this._XYZ_to_LCHab();this._normaOutX(b,4);return b}if(a.length==1){if(Array.isArray(a[0])){if(a[0].length==3){b=a[0]}}}if(a.length==3){b[0]=a[0];b[1]=a[1];b[2]=a[2]}this._LCHab_to_XYZ(b);return this};ColorRNA.prototype._LuvX=function(a){var b=[0,0,0];if(a.length==0){b=this._XYZ_to_Luv();this._normaOutX(b,4);return b}if(a.length==1){if(Array.isArray(a[0])){if(a[0].length==3){b=a[0]}}}if(a.length==3){b[0]=a[0];b[1]=a[1];b[2]=a[2]}this._Luv_to_XYZ(b);return this};ColorRNA.prototype._baseRGB_XXXx=function(a,d){var e=[0,0,0];if(a.length==0||typeof a[0]=="string"){if(typeof a[0]=="string"){this._colorSpace=a[0]}var b=this._XYZ_to_RGB();if(d=="HSL"){return this._RGB_to_HSL(b)}else{if(d=="HSL255"){return this._RGB_to_HSL_255(b)}else{if(d=="HSLwin"){return this._RGB_to_HSL_win239(b)}else{if(d=="HSV"||d=="HSB"){return this._RGB_to_HSV(b)}else{if(d=="HWB"){return this._RGB_to_HWB(b)}else{if(d=="CMY"){return this._RGB_to_CMY(b)}else{if(d=="CMYK"){return this._RGB_to_CMYK(b)}}}}}}}}if(a.length==1){if(Array.isArray(a[0])){if(a[0].length==3){e=a[0]}}}if(a.length>=3||typeof a[3]=="string"){if(typeof a[3]=="string"){this._colorSpace=a[3]}e[0]=a[0];e[1]=a[1];e[2]=a[2];if(typeof a[3]=="number"){e[3]=a[3]}}var c=[0,0,0];if(d=="HSL"){c=this._HSL_to_RGB([e[0],e[1],e[2]])}else{if(d=="HSL255"){c=this._HSL_to_RGB_255([e[0],e[1],e[2]])}else{if(d=="HSLwin"){c=this._HSL_to_RGB_win240([e[0],e[1],e[2]])}else{if(d=="HSV"||d=="HSB"){c=this._HSV_to_RGB([e[0],e[1],e[2]])}else{if(d=="HWB"){c=this._HWB_to_RGB([e[0],e[1],e[2]])}else{if(d=="CMY"){c=this._CMY_to_RGB([e[0],e[1],e[2]])}else{if(d=="CMYK"){c=this._CMYK_to_RGB([e[0],e[1],e[2],e[3]])}}}}}}}this.r=c[0];this.g=c[1];this.b=c[2];this._RGB_to_XYZ();return c};ColorRNA.prototype.Luv=function(){return(this._LuvX(arguments))};ColorRNA.prototype.xyY=function(){return(this._xyYX(arguments))};ColorRNA.prototype.LabPS=function(){return(this._LabX(arguments,true))};ColorRNA.prototype.Lab=function(){return(this._LabX(arguments,false))};ColorRNA.prototype.LCHab=function(){return(this._LCHabX(arguments,false))};ColorRNA.prototype.HSL=function(){return(this._baseRGB_XXXx(arguments,"HSL"))};ColorRNA.prototype.HSV=function(){return(this._baseRGB_XXXx(arguments,"HSV"))};ColorRNA.prototype.HSB=function(){return(this._baseRGB_XXXx(arguments,"HSV"))};ColorRNA.prototype.HSB=function(){return(this._baseRGB_XXXx(arguments,"HSV"))};ColorRNA.prototype.HWB=function(){return(this._baseRGB_XXXx(arguments,"HWB"))};ColorRNA.prototype.CMYK=function(){return(this._baseRGB_XXXx(arguments,"CMYK"))};ColorRNA.prototype.CMY=function(){return(this._baseRGB_XXXx(arguments,"CMY"))};ColorRNA.prototype.sRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.sRGB))};ColorRNA.prototype.AdobeRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.AdobeRGB))};ColorRNA.prototype.AppleRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.AppleRGB))};ColorRNA.prototype.BestRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.BestRGB))};ColorRNA.prototype.BetaRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.BetaRGB))};ColorRNA.prototype.BruceRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.BruceRGB))};ColorRNA.prototype.CIERGB=function(){return(this._rgbX(arguments,this._COLORSPACES.CIERGB))};ColorRNA.prototype.ColorMatchRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.ColorMatchRGB))};ColorRNA.prototype.DonRGB4=function(){return(this._rgbX(arguments,this._COLORSPACES.DonRGB4))};ColorRNA.prototype.ECIRGBv2=function(){return(this._rgbX(arguments,this._COLORSPACES.ECIRGBv2))};ColorRNA.prototype.EktaSpacePS5=function(){return(this._rgbX(arguments,this._COLORSPACES.EktaSpacePS5))};ColorRNA.prototype.NTSCRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.NTSCRGB))};ColorRNA.prototype.PALSECAMRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.PALSECAMRGB))};ColorRNA.prototype.ProPhotoRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.ProPhotoRGB))};ColorRNA.prototype.SMPTECRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.SMPTECRGB))};ColorRNA.prototype.WideGamutRGB=function(){return(this._rgbX(arguments,this._COLORSPACES.WideGamutRGB))};ColorRNA.prototype.getLuma=function(c){var b=0;var a=this._XYZ_to_RGB();this._normalizArray(a,0,255,1);if(c=="601"){b=a[0]*0.299+a[1]*0.587+a[2]*0.114}else{if(c=="HSP"){b=Math.sqrt(0.241*Math.pow(a[0],2)+0.691*Math.pow(a[1],2)+0.068*Math.pow(a[2],2))}else{b=a[0]*0.2126+a[1]*0.7152+a[2]*0.0722}}return b};ColorRNA.prototype.getWCAGluma=function(){var a=this._XYZ_to_RGB();var d=[];for(var b=0;b<a.length;b++){var c=a[b]/255;d[b]=(c<=0.03928)?c/12.92:Math.pow(((c+0.055)/1.055),2.4)}return 0.2126*d[0]+0.7152*d[1]+0.0722*d[2]};ColorRNA.prototype.getWCAGcontrastThan=function(c){var b=this.getWCAGluma(),a=c.getWCAGluma();if(b>a){return(b+0.05)/(a+0.05)}return(a+0.05)/(b+0.05)};ColorRNA.prototype.getHex=function(){var a=this._XYZ_to_RGB();var b=this._rgb_to_hex([a[0],a[1],a[2]]);return"#"+b};ColorRNA.prototype.XYZ=function(){var a=[0,0,0];if(arguments.length==0){a=[this._xyz.X,this._xyz.Y,this._xyz.Z];return a}if(arguments.length==1){if(Array.isArray(arguments[0])){if(arguments[0].length==3){a=arguments[0]}}}if(arguments.length==3){a[0]=arguments[0];a[1]=arguments[1];a[2]=arguments[2]}this._normaInputXYZ(a);this._xyz.X=a[0];this._xyz.Y=a[1];this._xyz.Z=a[2];return this};ColorRNA.prototype.colorDiff=function(K,I,G){var w=K.Lab();var J={L:w[0],a:w[1],b:w[2]};var v=I.Lab();var H={L:v[0],a:v[1],b:v[2]};var M=0;if(G=="DeltaE1976"){var q=J.L-H.L;var d=J.a-H.a;var b=J.b-H.b;M=Math.sqrt(q*q+d*d+b*b)}if(G=="DeltaE1994_T"||G=="DeltaE1994_G"){var S=(G=="DeltaE1994_T")?0.048:0.045;var Q=(G=="DeltaE1994_T")?0.014:0.015;var o=(G=="DeltaE1994_T")?2:1;var y=1;var r=1;var W=Math.sqrt(J.a*J.a+J.b*J.b);var V=Math.sqrt(H.a*H.a+H.b*H.b);var F=J.a-H.a;var D=J.b-H.b;var B=W-V;var R=F*F+D*D-B*B;var u=(R>0)?Math.sqrt(R):0;var q=J.L-H.L;var ab=1;var ag=1+S*W;var ad=1+Q*W;var ac=q/(o*ab);var ai=B/(y*ag);var ae=u/(r*ad);if(G=="DeltaE1994_T"){M=Math.sqrt(ac*ac+ai*ai+ae*ae)}else{M=Math.sqrt(ac*ac+ai*ai+ae*ae)}}if(G=="DeltaE2000"){var o=1;var y=1;var r=1;var z=0.5*(J.L+H.L);var m=Math.sqrt(J.a*J.a+J.b*J.b);var l=Math.sqrt(H.a*H.a+H.b*H.b);var i=0.5*(m+l);var aq=i*i*i*i*i*i*i;var ak=0.5*(1-Math.sqrt(aq/(aq+6103515625)));var X=J.a*(1+ak);var h=H.a*(1+ak);var Y=Math.sqrt(X*X+J.b*J.b);var j=Math.sqrt(h*h+H.b*H.b);var O=0.5*(Y+j);var Z=(Math.atan2(J.b,X)*180)/Math.PI;if(Z<0){Z+=360}var k=(Math.atan2(H.b,h)*180)/Math.PI;if(k<0){k+=360}var aa=(Math.abs(Z-k)>180)?(0.5*(Z+k+360)):(0.5*(Z+k));var ah=1-0.17*Math.cos(Math.PI*(aa-30)/180)+0.24*Math.cos(Math.PI*(2*aa)/180)+0.32*Math.cos(Math.PI*(3*aa+6)/180)-0.2*Math.cos(Math.PI*(4*aa-63)/180);if(Math.abs(k-Z)<=180){var a=k-Z}else{var a=(k<=Z)?(k-Z+360):(k-Z-360)}var U=H.L-J.L;var am=j-Y;var N=2*Math.sqrt(Y*j)*Math.sin(Math.PI*(0.5*a)/180);var ab=1+((0.015*(z-50)*(z-50))/Math.sqrt(20+(z-50)*(z-50)));var ag=1+0.045*O;var ad=1+0.015*O*ah;var af=30*Math.exp(-((aa-275)/25)*((aa-275)/25));var T=O*O*O*O*O*O*O;var c=Math.sqrt(T/(T+6103515625));var aj=-2*c*Math.sin(Math.PI*(2*af)/180);M=Math.sqrt((U/(o*ab))*(U/(o*ab))+(am/(y*ag))*(am/(y*ag))+(N/(r*ad))*(N/(r*ad))+(am/(y*ag))*(N/(r*ad))*aj)}if(G=="DeltaECMC_11"||G=="DeltaECMC_21"){if(G=="DeltaECMC_11"){var n=1,p=1}else{if(G=="DeltaECMC_21"){var n=2,p=1}}var m=Math.sqrt(J.a*J.a+J.b*J.b);var l=Math.sqrt(H.a*H.a+H.b*H.b);var s=(J.L<16)?(0.511):((0.040975*J.L)/(1+0.01765*J.L));var E=(0.0638*m)/(1+0.0131*m)+0.638;var P=(m<0.000001)?0:((Math.atan2(J.b,J.a)*180)/Math.PI);while(P<0){P+=360}while(P>=360){P-=360}var ah=((P>=164)&&(P<=345))?(0.56+Math.abs(0.2*Math.cos((Math.PI*(P+168))/180))):(0.36+Math.abs(0.4*Math.cos((Math.PI*(P+35))/180)));var e=m*m*m*m;var al=Math.sqrt(e/(e+1900));var x=E*(al*ah+1-al);var q=J.L-H.L;var B=m-l;var F=J.a-H.a;var D=J.b-H.b;var A=F*F+D*D-B*B;var ap=q/(n*s);var ao=B/(p*E);var an=x;if(n==2){M=Math.sqrt(ap*ap+ao*ao+(A/(an*an)))}else{M=Math.sqrt(ap*ap+ao*ao+(A/(an*an)))}}return +M.toFixed(2)};ColorRNA.prototype.diff_ECMC11_Than=function(a){return this.colorDiff(this,a,"DeltaECMC_11")};ColorRNA.prototype.diff_ECMC21_Than=function(a){return this.colorDiff(this,a,"DeltaECMC_21")};ColorRNA.prototype.diff_DE2000_Than=function(a){return this.colorDiff(this,a,"DeltaE2000")};ColorRNA.prototype.diff_DE1976_Than=function(a){return this.colorDiff(this,a,"DeltaE1976")};ColorRNA.prototype.diff_DE1994_GraphicArts_Than=function(a){return this.colorDiff(this,a,"DeltaE1994_G")};ColorRNA.prototype.diff_DE1994_Textiles_Than=function(a){return this.colorDiff(this,a,"DeltaE1994_T")};var color1=new ColorRNA(10,235,245);console.log("RGB:"+color1.rgb());console.log("sRGB:"+color1.sRGB());console.log(color1.getHex());console.log("AdobeRGB:"+color1.AdobeRGB());console.log(color1.getHex());console.log("AppleRGB:"+color1.AppleRGB());console.log(color1.getHex());console.log("ProPhotoRGB:"+color1.ProPhotoRGB());console.log(color1.getHex());color1.sRGB(10,235,245);color1.AdobeRGB();color1.ProPhotoRGB(154,218,239);console.log("ProPhotoRGB -> sRGB:"+color1.AdobeRGB());console.log("AppleRGB -> ProPhotoRGB:"+color1.AppleRGB(52,233,243).ProPhotoRGB());console.log("------------------------------------------------------------------------------");console.log("Lab:"+color1.rgb(52,233,243).Lab());console.log("LabPs:"+color1.rgb(52,233,243).LabPS());console.log("LCHab:"+color1.rgb(52,233,243).LCHab());console.log("Luv:"+color1.rgb(52,233,243).Luv());console.log("xyY:"+color1.rgb(52,233,243).xyY());console.log("XYZ:"+color1.rgb(52,233,243).XYZ());console.log("----");console.log("Lab_to_rgb:"+color1.Lab(84.7269,-39.5516,-17.4109).rgb());console.log("LabPs_to_rgb:"+color1.LabPS(84,-42,-18).rgb());console.log("LCHab_to_rgb:"+color1.LCHab(84.7269,43.2142,203.7594).rgb());console.log("xyY_to_rgb:"+color1.xyY(0.2256,0.3161,0.6547).rgb());console.log("Luv_to_rgb:"+color1.Luv(84.7269,-61.2033,-21.7867).rgb());console.log("XYZ_to_rgb:"+color1.XYZ(0.4672539339338757,0.6547307056620336,0.9495155562423543).rgb());