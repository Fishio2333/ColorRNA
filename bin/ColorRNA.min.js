!function(t,_){"object"==typeof exports&&"undefined"!=typeof module?module.exports=_():"function"==typeof define&&define.amd?define(_):t.ColorRNA=_()}(this,function(){"use strict";function t(){this._xyz={X:0,Y:0,Z:0},this._gamma=-2.2,this._colorSpace="sRGB",this._refWhiteName="D65",this._refWhiteNameUSER="",this._adtAlg="Bradford",this._doAdapta=!0,this._doAdaptaUSER=0,this._dLV=1,this._COLORSPACES={sRGB:"sRGB",AdobeRGB:"AdobeRGB",AppleRGB:"AppleRGB",BestRGB:"BestRGB",BetaRGB:"BetaRGB",BruceRGB:"BruceRGB",CIERGB:"CIERGB",ColorMatchRGB:"ColorMatchRGB",ECIRGBv2:"ECIRGBv2",DonRGB4:"DonRGB4",EktaSpacePS5:"EktaSpacePS5",NTSCRGB:"NTSCRGB",PALSECAMRGB:"PALSECAMRGB",ProPhotoRGB:"ProPhotoRGB",SMPTECRGB:"SMPTECRGB",WideGamutRGB:"WideGamutRGB"},this._REFWHITES={A:"A",B:"B",C:"C",D50:"D50",D55:"D55",D65:"D65",D75:"D75",E:"E",F2:"F2",F7:"F7",F11:"F11"},this._adt_refWhite={X:0,Y:0,Z:0},this._adt_refWhiteRGB={X:0,Y:0,Z:0},this._adt_mtxAdaptMa=[[1,0,0],[0,1,0],[0,0,1]],this._adt_mtxAdaptMaI=[[1,0,0],[0,1,0],[0,0,1]],this._rgbX(arguments,this._COLORSPACES.sRGB)}return t.prototype._RGBstring=function(){return"#"+this.r.toString(16)+this.g.toString(16)+this.b.toString(16)},t.prototype._arrayProduct=function(t,_){for(var a=0,i=0;i<t.length;i++)a+=t[i]*_[i];return a},t.prototype._normaliz=function(t,_,a,i){var r=0;return 4==arguments.length?(r=(t-_)/(a-_),r*=i):r=arguments[0]/255,r},t.prototype._normalizArray=function(t,_,a,i){for(var r=0;r<t.length;r++)t[r]=this._normaliz(t[r],_,a,i);return t},t.prototype._arrayFixed=function(t,_){for(var a=0;a<t.length;a++)t[a]=+t[a].toFixed(_)},t.prototype._arrayRound=function(t){for(var _=0;_<t.length;_++)t[_]=Math.round(t[_])},t.prototype._enGamma=function(t){var _=0,a=1;return t<0&&(a=-1,t=-t),this._gamma<0&&(_=t<=.0031306684425005883?a*t*12.92:1.055*a*Math.pow(t,.4166666666666667)-.055),0==this._gamma&&(_=t<=216/24389?a*(24389*t/2700):a*(1.16*Math.pow(t,1/3)-.16)),this._gamma>0&&(_=a*Math.pow(t,1/this._gamma)),_},t.prototype._adt_adaptation=function(t,_){this._adt_setRefWhite(t),this._adt_setAdaptMa(_);var a=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][0],i=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][1],r=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][2],e=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][0],h=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][1],s=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][2],o=this._xyz.X*this._adt_mtxAdaptMa[0][0]+this._xyz.Y*this._adt_mtxAdaptMa[1][0]+this._xyz.Z*this._adt_mtxAdaptMa[2][0],n=this._xyz.X*this._adt_mtxAdaptMa[0][1]+this._xyz.Y*this._adt_mtxAdaptMa[1][1]+this._xyz.Z*this._adt_mtxAdaptMa[2][1],d=this._xyz.X*this._adt_mtxAdaptMa[0][2]+this._xyz.Y*this._adt_mtxAdaptMa[1][2]+this._xyz.Z*this._adt_mtxAdaptMa[2][2];return o*=a/e,n*=i/h,d*=r/s,[o*this._adt_mtxAdaptMaI[0][0]+n*this._adt_mtxAdaptMaI[1][0]+d*this._adt_mtxAdaptMaI[2][0],o*this._adt_mtxAdaptMaI[0][1]+n*this._adt_mtxAdaptMaI[1][1]+d*this._adt_mtxAdaptMaI[2][1],o*this._adt_mtxAdaptMaI[0][2]+n*this._adt_mtxAdaptMaI[1][2]+d*this._adt_mtxAdaptMaI[2][2]]},t.prototype._adt_invAdaptation=function(t,_,a){this._adt_setRefWhite(_),this._adt_setAdaptMa(a);var i=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][0],r=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][1],e=this._adt_refWhite.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhite.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhite.Z*this._adt_mtxAdaptMa[2][2],h=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][0]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][0]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][0],s=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][1]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][1]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][1],o=this._adt_refWhiteRGB.X*this._adt_mtxAdaptMa[0][2]+this._adt_refWhiteRGB.Y*this._adt_mtxAdaptMa[1][2]+this._adt_refWhiteRGB.Z*this._adt_mtxAdaptMa[2][2],n=t[0]*this._adt_mtxAdaptMa[0][0]+t[1]*this._adt_mtxAdaptMa[1][0]+t[2]*this._adt_mtxAdaptMa[2][0],d=t[0]*this._adt_mtxAdaptMa[0][1]+t[1]*this._adt_mtxAdaptMa[1][1]+t[2]*this._adt_mtxAdaptMa[2][1],p=t[0]*this._adt_mtxAdaptMa[0][2]+t[1]*this._adt_mtxAdaptMa[1][2]+t[2]*this._adt_mtxAdaptMa[2][2];return n*=h/i,d*=s/r,p*=o/e,[n*this._adt_mtxAdaptMaI[0][0]+d*this._adt_mtxAdaptMaI[1][0]+p*this._adt_mtxAdaptMaI[2][0],n*this._adt_mtxAdaptMaI[0][1]+d*this._adt_mtxAdaptMaI[1][1]+p*this._adt_mtxAdaptMaI[2][1],n*this._adt_mtxAdaptMaI[0][2]+d*this._adt_mtxAdaptMaI[1][2]+p*this._adt_mtxAdaptMaI[2][2]]},t.prototype._adt_setRefWhite=function(t){switch(this._refWhiteNameUSER.length>0&&(t=this._refWhiteNameUSER),this._adt_refWhite.Y=1,t){case"A":this._adt_refWhite.X=1.0985,this._adt_refWhite.Z=.35585;break;case"B":this._adt_refWhite.X=.99072,this._adt_refWhite.Z=.85223;break;case"C":this._adt_refWhite.X=.98074,this._adt_refWhite.Z=1.18232;break;case"D50":this._adt_refWhite.X=.96422,this._adt_refWhite.Z=.82521;break;case"D55":this._adt_refWhite.X=.95682,this._adt_refWhite.Z=.92149;break;case"D65":this._adt_refWhite.X=.95047,this._adt_refWhite.Z=1.08883;break;case"D75":this._adt_refWhite.X=.94972,this._adt_refWhite.Z=1.22638;break;case"E":this._adt_refWhite.X=1,this._adt_refWhite.Z=1;break;case"F2":this._adt_refWhite.X=.99186,this._adt_refWhite.Z=.67393;break;case"F7":this._adt_refWhite.X=.95041,this._adt_refWhite.Z=1.08747;break;case"F11":this._adt_refWhite.X=1.00962,this._adt_refWhite.Z=.6435}},t.prototype._adt_setAdaptMa=function(t){switch(t){case"Bradford":this._adt_mtxAdaptMa=[[.8951,-.7502,.0389],[.2664,1.7135,-.0685],[-.1614,.0367,1.0296]],this._adt_mtxAdaptMaI=[[.9869929054667123,.43230526972339456,-.008528664575177328],[-.14705425642099013,.5183602715367776,.04004282165408487],[.15996265166373125,.0492912282128556,.9684866957875502]];break;case"vonKries":this._adt_mtxAdaptMa=[[.40024,-.2263,0],[.7076,1.16532,0],[-.08081,.0457,.91822]],this._adt_mtxAdaptMaI=[[1.8599363874558397,.3611914362417676,-0],[-1.1293816185800916,.6388124632850422,-0],[.21989740959619328,-6370596838650885e-21,1.0890636230968613]];break;case"none":this._adt_mtxAdaptMa=[[1,0,0],[0,1,0],[0,0,1]],this._adt_mtxAdaptMaI=[[1,0,0],[0,1,0],[0,0,1]]}},t.prototype._deGamma=function(t){var _=0,a=1;return t<0&&(a=-1,t=-t),this._gamma<0&&(_=t<=.0404482362771076?a*t/12.92:a*Math.pow((t+.055)/1.055,2.4)),0==this._gamma&&(_=t<=.08?2700*a*t/24389:a*((((1e6*t+48e4)*t+76800)*t+4096)/1560896)),this._gamma>0&&(_=a*Math.pow(t,this._gamma)),_},t.prototype._getRGBnucleotids=function(t,_){switch(this._adt_refWhiteRGB.Y=1,this._refWhiteName="D65",this._doAdapta=!0,t){case"sRGB":return this._gamma=-2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==_?2==this._dLV?[[3.2404541621141045,-1.5371385127977166,-.498531409556016],[-.9692660305051868,1.8760108454466942,.041556017530349834],[.055643430959114726,-.2040259135167538,1.0572251882231791]]:[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]]:2==this._dLV?[[.4124564390896922,.357576077643909,.18043748326639894],[.21267285140562253,.715152155287818,.07217499330655958],[.0193338955823293,.11919202588130297,.9503040785363679]]:[[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]];case"AdobeRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==_?2==this._dLV?[[2.041368979260079,-.5649463871751954,-.3446943843778483],[-.9692660305051861,1.876010845446693,.041556017530349786],[.013447387216170255,-.11838974235412553,1.0154095719504164]]:[[2.041369,-.5649464,-.3446944],[-.969266,1.8760108,.041556],[.0134474,-.1183897,1.0154096]]:2==this._dLV?[[.5767308871981477,.18555395071121408,.18818516209063843],[.29737686371154487,.6273490714522,.07527406483625537],[.027034260337413143,.0706872193185578,.9911085203440292]]:[[.5767309,.185554,.1881852],[.2973769,.6273491,.0752741],[.0270343,.0706872,.9911085]];case"AppleRGB":return this._gamma=1.8,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==_?2==this._dLV?[[2.951537290948746,-1.2894115658994107,-.473844478043996],[-1.0851093382231771,1.9908566080903682,.037202561107440836],[.08549335448914223,-.26949635273220945,1.0912975249496382]]:[[2.9515373,-1.2894116,-.4738445],[-1.0851093,1.9908566,.0372026],[.0854934,-.2694964,1.0912975]]:2==this._dLV?[[.4497288365610329,.31624860938967136,.1844925540492957],[.24465248708920193,.6720282949530516,.08331921795774647],[.025184814847417827,.14118241490610328,.9224627702464786]]:[[.4497288,.3162486,.1844926],[.2446525,.6720283,.0833192],[.0251848,.1411824,.9224628]];case"BestRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[1.7552599329466554,-.4836785613998958,-.25300004986116026],[-.5441336296844771,1.5068789209543363,.021552825898898505],[.00634673971374007,-.01757613896601896,1.225695866021057]]:[[1.7552599,-.4836786,-.253],[-.5441336,1.5068789,.0215528],[.0063467,-.0175761,1.2256959]]:2==this._dLV?[[.6326696499956765,.20455579792131387,.12699455208300955],[.22845686422193134,.7373522948326431,.034190840945425655],[0,.009514223159130886,.8156957768408691]]:[[.6326696,.2045558,.1269946],[.2284569,.7373523,.0341908],[0,.0095142,.8156958]];case"BetaRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[1.6832269542614402,-.4282362832078967,-.2360184809079736],[-.7710228944287557,1.7065571005222588,.04468995133824896],[.04000128943944507,-.08853755837368198,1.272364022576533]]:[[1.683227,-.4282363,-.2360185],[-.7710229,1.7065571,.04469],[.0400013,-.0885376,1.272364]]:2==this._dLV?[[.671253700292543,.17458338980154234,.11838290990591456],[.30327257771637545,.6637860908315439,.03294133145208057],[5.409707559738789e-17,.040700961469342455,.7845090385306573]]:[[.6712537,.1745834,.1183829],[.3032726,.6637861,.0329413],[0,.040701,.784509]];case"BruceRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==_?2==this._dLV?[[2.745466866559799,-1.1358136045241505,-.4350268528006593],[-.9692660305051869,1.8760108454466942,.04155601753034985],[.011272295190850611,-.1139754291519338,1.0132540899331266]]:[[2.7454669,-1.1358136,-.4350269],[-.969266,1.8760108,.041556],[.0112723,-.1139754,1.0132541]]:2==this._dLV?[[.4674161637795275,.2944512299212599,.18860260629921258],[.24101145944881885,.6835474980314961,.07544104251968503],[.021910132677165326,.0736128074803149,.9933070598425197]]:[[.4674162,.2944512,.1886026],[.2410115,.6835475,.075441],[.0219101,.0736128,.9933071]];case"CIERGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=1,this._adt_refWhiteRGB.Z=1,1==_?2==this._dLV?[[2.370674329102138,-.9000405327854051,-.4706337963167336],[-.513884966581945,1.42530358655747,.08858138002447524],[.005298175073030407,-.0146949384101032,1.0093967633370728]]:[[2.3706743,-.9000405,-.4706338],[-.513885,1.4253036,.0885814],[.0052982,-.0146949,1.0093968]]:2==this._dLV?[[.48871796548117163,.31068034326701394,.20060169125181454],[.1762044365340279,.8129846938775509,.010810869588421142],[0,.010204828793442072,.9897951712065579]]:[[.488718,.3106803,.2006017],[.1762044,.8129847,.0108109],[0,.0102048,.9897952]];case"ColorMatchRGB":return this._gamma=1.8,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[2.6422874096694384,-1.2234270341709754,-.39301430179044206],[-1.1119762771300263,2.059018273920192,.01596138196837363],[.08216985846755141,-.2807254155216341,1.4559876814266082]]:[[2.6422874,-1.223427,-.3930143],[-1.1119763,2.0590183,.0159614],[.0821699,-.2807254,1.4559877]]:2==this._dLV?[[.509343853397384,.3209070884940387,.13396905810857737],[.2748839843731914,.6581314865725201,.06698452905428869],[.024254469209399214,.1087820638962844,.6921734668943165]]:[[.5093439,.3209071,.1339691],[.274884,.6581315,.0669845],[.0242545,.1087821,.6921735]];case"ECIRGBv2":return this._gamma=0,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[1.7827617697270912,-.49698473887532724,-.2690100880150854],[-.9593623286322266,1.9477962429805813,-.027580735166583017],[.08593169513496947,-.17446738103160447,1.322827306926194]]:[[1.7827618,-.4969847,-.2690101],[-.9593623,1.9477962,-.0275807],[.0859317,-.1744674,1.3228273]]:2==this._dLV?[[.650204257079646,.1780773570796461,.13593838584070797],[.32024985796460176,.6020710644121368,.07767907762326169],[-5.3871025143217717e-17,.06783899317319857,.7573710068268015]]:[[.6502043,.1780774,.1359384],[.3202499,.6020711,.0776791],[-0,.067839,.757371]];case"DonRGB4":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[1.7603902333031187,-.48811980100639313,-.25361261951399006],[-.7126287844544976,1.6527431594729967,.041671534607820124],[.00782073858032594,-.03474110403369325,1.244774289550262]]:[[1.7603902,-.4881198,-.2536126],[-.7126288,1.6527432,.0416715],[.0078207,-.0347411,1.2447743]]:2==this._dLV?[[.645771138436728,.19335110357732524,.12509775798594666],[.2783496286365207,.6879702057518782,.033680165611601025],[.0037113283818203304,.01798614916998376,.8035125224481958]]:[[.6457711,.1933511,.1250978],[.2783496,.6879702,.0336802],[.0037113,.0179861,.8035125]];case"EktaSpacePS5":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[2.0043819420638203,-.7304844248729281,-.24500518813859393],[-.7110285484718862,1.6202125940588885,.07922268628430854],[.038126311068521795,-.0868779875167958,1.2725437595985338]]:[[2.0043819,-.7304844,-.2450052],[-.7110285,1.6202126,.0792227],[.0381263,-.086878,1.2725438]]:2==this._dLV?[[.5938913615570769,.2729801227546152,.09734851568830809],[.26062858312936465,.7349464843393485,.004424932531286731],[4.743538587961513e-17,.04199694196224853,.7832130580377514]]:[[.5938914,.2729801,.0973485],[.2606286,.7349465,.0044249],[0,.0419969,.7832131]];case"NTSCRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.98074,this._adt_refWhiteRGB.Z=1.18232,1==_?2==this._dLV?[[1.9099960989184541,-.5324541554529706,-.2882091300158282],[-.9846663050051847,1.9991709828893145,-.02830819991079395],[.0583056402155416,-.11837811801337218,.8975534918028807]]:[[1.9099961,-.5324542,-.2882091],[-.9846663,1.999171,-.0283082],[.0583056,-.1183781,.8975535]]:2==this._dLV?[[.6068909212389378,.1735011212389381,.20034795752212392],[.2989164238938052,.5865990289506955,.11448454715549937],[-5.028240852204785e-17,.06609566523388125,1.116224334766119]]:[[.6068909,.1735011,.200348],[.2989164,.586599,.1144845],[-0,.0660957,1.1162243]];case"PALSECAMRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==_?2==this._dLV?[[3.0628971232226965,-1.393179136493678,-.4757516712579541],[-.9692660305051867,1.876010845446694,.04155601753034983],[.06787750995175175,-.22885477399033227,1.0693489682562851]]:[[3.0628971,-1.3931791,-.4757517],[-.969266,1.8760108,.041556],[.0678775,-.2288548,1.069349]]:2==this._dLV?[[.4306190335097004,.3415419122574957,.17830905423280421],[.22203793915343925,.7066384391534394,.07132362169312169],[.020185267195767184,.12955038051146386,.9390943522927689]]:[[.430619,.3415419,.1783091],[.2220379,.7066384,.0713236],[.0201853,.1295504,.9390944]];case"ProPhotoRGB":return this._gamma=1.8,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[1.3459433009386654,-.25560750931676696,-.05111176587088495],[-.544598869458717,1.508167317720767,.020535141586646915],[0,-0,1.2118127506937628]]:[[1.3459433,-.2556075,-.0511118],[-.5445989,1.5081673,.0205351],[0,0,1.2118128]]:2==this._dLV?[[.7976749444306044,.13519170147409815,.031353354095297416],[.2880402378623102,.7118740972357901,8566490189971971e-20],[0,0,.82521]]:[[.7976749,.1351917,.0313534],[.2880402,.7118741,857e-7],[0,0,.82521]];case"SMPTECRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.95047,this._adt_refWhiteRGB.Z=1.08883,1==_?2==this._dLV?[[3.505395974670056,-1.7394893606633242,-.543964026874098],[-1.0690722072799321,1.9778244814100043,.035172230231857005],[.056320014767146896,-.1970226122130985,1.0502026283050325]]:[[3.505396,-1.7394894,-.543964],[-1.0690722,1.9778245,.0351722],[.05632,-.1970226,1.0502026]]:2==this._dLV?[[.3935890809541021,.365249655704132,.19163126334176603],[.21241315480062656,.7010436940127694,.08654315118660402],[.018742337188290558,.11193134610287912,.9581563167088301]]:[[.3935891,.3652497,.1916313],[.2124132,.7010437,.0865432],[.0187423,.1119313,.9581563]];case"WideGamutRGB":return this._gamma=2.2,this._adt_refWhiteRGB.X=.96422,this._adt_refWhiteRGB.Z=.82521,1==_?2==this._dLV?[[1.4628067131216802,-.18406234137547003,-.27436064462466103],[-.5217933153765428,1.447238063402864,.06772274590650387],[.034934211112166366,-.09689300063185764,1.2884099024409357]]:[[1.4628067,-.1840623,-.2743606],[-.5217933,1.4472381,.0677227],[.0349342,-.096893,1.2884099]]:2==this._dLV?[[.7161045686144476,.10092960102210317,.1471858303634494],[.25818736147323623,.7249378299500627,.016874808576701202],[0,.05178127356786167,.7734287264321384]]:[[.7161046,.1009296,.1471858],[.2581874,.7249378,.0168748],[0,.0517813,.7734287]]}},t.prototype._RGB_to_YPbPr=function(t){return t=this._normalizArray(t,0,255,1),[.299*t[0]+.587*t[1]+.114*t[2],-.1687367*t[0]-.331264*t[1]+.5*t[2],.5*t[0]-.418688*t[1]-.081312*t[2]]},t.prototype._YPbPr_to_RGB_=function(t){var _=.9999999999991468*t[0]-12188941887145875e-22*t[1]+1.401999588656144*t[2],a=.9999997591050251*t[0]-.34413567816504304*t[1]-.7141364933164679*t[2],i=1.0000012404000462*t[0]+1.772000066072304*t[1]+21453384174593273e-22*t[2];return this._normalizArray([_,a,i],0,1,255)},t.prototype._RGB_to_YCbCr=function(t){return t=this._normalizArray(t,0,255,1),[65.481*t[0]+128.553*t[1]+24.966*t[2]+16,-37.797*t[0]-74.203*t[1]+112*t[2]+128,112*t[0]-93.786*t[1]-18.214*t[2]+128]},t.prototype._YCbCr_to_RGB=function(t){t[0]-=16,t[1]-=128,t[2]-=128;var _=.004566210045662101*t[0]+1.1808799897946416e-9*t[1]+.006258928969943936*t[2],a=.004566210045662101*t[0]-.0015363236860449021*t[1]-.003188110949655707*t[2],i=.004566210045662101*t[0]+.007910716233554741*t[1]+1.1977497040190077e-8*t[2];return this._normalizArray([_,a,i],0,1,255)},t.prototype._RGB_to_JpegYCbCr=function(t){var _=this._RGB_to_YPbPr(t);return[_[0],_[1]+.5,_[2]+.5]},t.prototype._JpegYCbCr_to_RGB=function(t){return this._YPbPr_to_RGB_([t[0],t[1]-.5,t[2]-.5])},t.prototype._RGB_to_YIQ=function(t){return t=this._normalizArray(t,0,255,1),[.299*t[0]+.587*t[1]+.114*t[2],.595716*t[0]-.274453*t[1]-.321263*t[2],.211456*t[0]-.522591*t[1]+.311135*t[2]]},t.prototype._YIQ_to_RGB=function(t){var _=t[0]+.9562957197589482*t[1]+.6210244164652611*t[2],a=t[0]-.27212209931851045*t[1]-.647380596825695*t[2],i=t[0]-1.1069890167364902*t[1]+1.7046149983646481*t[2];return this._normalizArray([_,a,i],0,1,255)},t.prototype._RGB_to_YUV=function(t){return t=this._normalizArray(t,0,255,1),[.299*t[0]+.587*t[1]+.114*t[2],-.147*t[0]-.289*t[1]+.436*t[2],.615*t[0]-.515*t[1]-.1*t[2]]},t.prototype._YUV_to_RGB=function(t){var _=t[0]-3945707070708279e-20*t[1]+1.139827967171717*t[2],a=t[0]-.39461016414141414*t[1]-.5805003156565657*t[2],i=t[0]+2.0319996843434343*t[1]-.0004813762626262513*t[2];return this._normalizArray([_,a,i],0,1,255)},t.prototype._RGB_to_HSL=function(t,_){t=this._normalizArray(t,0,255,1);var a,i,r,e,h,s,o,n,d;if(a=t[0],i=t[1],r=t[2],n=Math.max(a,i,r),d=Math.min(a,i,r),s=(n+d)/2,n===d)e=h=0;else{switch(o=n-d,h=s>.5?o/(2-n-d):o/(n+d),n){case a:e=(i-r)/o+(i<r?6:0);break;case i:e=(r-a)/o+2;break;case r:e=(a-i)/o+4}e/=6}return e*=360,h*=100,s*=100,1!=_&&(e=Math.round(e),h=Math.round(h),s=Math.round(s)),[e,h,s]},t.prototype._HSL_to_RGB=function(t){var _=t[0],a=this._normaliz(t[1],0,100,1),i=this._normaliz(t[2],0,100,1);if(360==_&&(_=0),void 0==_)return[0,0,0];var r=(1-Math.abs(2*i-1))*a,e=_/60,h=r*(1-Math.abs(e%2-1));e=Math.floor(e);var s,o,n;0===e?(s=r,o=h,n=0):1===e?(s=h,o=r,n=0):2===e?(s=0,o=r,n=h):3===e?(s=0,o=h,n=r):4===e?(s=h,o=0,n=r):5===e&&(s=r,o=0,n=h);var d=i-r/2;return s+=d,o+=d,n+=d,this._normaOutRGB(this._normalizArray([s,o,n],0,1,255))},t.prototype._RGB_to_HSL_255=function(t){var _=this._RGB_to_HSL(t,!0);return _[0]=Math.round(this._normaliz(_[0],0,360,255)),_[1]=Math.round(this._normaliz(_[1],0,100,255)),_[2]=Math.round(this._normaliz(_[2],0,100,255)),_},t.prototype._HSL_to_RGB_255=function(t){var _=[0,0,0];return _[0]=Math.round(this._normaliz(t[0],0,255,360)),_[1]=Math.round(this._normaliz(t[1],0,255,100)),_[2]=Math.round(this._normaliz(t[2],0,255,100)),this._HSL_to_RGB(_)},t.prototype._RGB_to_HSL_win239=function(t){var _=this._RGB_to_HSL(t,!0);return _[0]=Math.round(this._normaliz(_[0],0,360,239)),_[1]=Math.round(this._normaliz(_[1],0,100,240)),_[2]=Math.round(this._normaliz(_[2],0,100,240)),_},t.prototype._HSL_to_RGB_win240=function(t){var _=[0,0,0];return _[0]=Math.round(this._normaliz(t[0],0,239,360)),_[1]=Math.round(this._normaliz(t[1],0,240,100)),_[2]=Math.round(this._normaliz(t[2],0,240,100)),this._HSL_to_RGB(_)},t.prototype._RGB_to_HSV=function(t){var _,a,i,r,e,h,s=this._normaliz(t[0],0,255,1),o=this._normaliz(t[1],0,255,1),n=this._normaliz(t[2],0,255,1);if(_=Math.max(s,o,n),a=Math.min(s,o,n),e=_,h=_-a,r=0===_?0:h/_,_===a)i=0;else{switch(_){case s:i=(o-n)/h+(o<n?6:0);break;case o:i=(n-s)/h+2;break;case n:i=(s-o)/h+4}i/=6}return i=Math.round(360*i),r=Math.round(100*r),e=Math.round(100*e),[i,r,e]},t.prototype._HSV_to_RGB=function(t){var _,a,i,r,e,h,s,o;if(0===d)return[0,0,0];var n=this._normaliz(t[1],0,100,1),d=this._normaliz(t[2],0,100,1),p=t[0]/60;switch(r=Math.floor(p),e=p-r,h=d*(1-n),s=d*(1-n*e),o=d*(1-n*(1-e)),r){case 0:_=d,a=o,i=h;break;case 1:_=s,a=d,i=h;break;case 2:_=h,a=d,i=o;break;case 3:_=h,a=s,i=d;break;case 4:_=o,a=h,i=d;break;case 5:_=d,a=h,i=s}return this._normaOutRGB(this._normalizArray([_,a,i],0,1,255))},t.prototype._RGB_to_HWB=function(t){var _,a,i,r=this._RGB_to_HSV(t);return _=r[0],a=Math.round((100-r[1])*r[2]/100),i=Math.round(100-r[2]),[_,a,i]},t.prototype._HWB_to_RGB=function(t){var _,a,i;return _=t[0],a=100-t[1]/(100-t[2])*100,i=100-t[2],this._HSV_to_RGB([_,a,i])},t.prototype._RGB_to_CMY=function(t){var _=1-t[0]/255,a=1-t[1]/255,i=1-t[2]/255;return _=Math.round(100*_),a=Math.round(100*a),i=Math.round(100*i),[_,a,i]},t.prototype._CMY_to_RGB=function(t){var _=t[0]/100,a=t[1]/100,i=t[2]/100;return[Math.round(Math.max(0,255*(1-_))),Math.round(Math.max(0,255*(1-a))),Math.round(Math.max(0,255*(1-i)))]},t.prototype._CMY_to_CMYK=function(t){var _=t[0]/100,a=t[1]/100,i=t[2]/100,r=Math.min(i,Math.min(a,Math.min(_,1)));return _=Math.round((_-r)/(1-r)*100),a=Math.round((a-r)/(1-r)*100),i=Math.round((i-r)/(1-r)*100),r=Math.round(100*r),[_,a,i,r]},t.prototype._CMYK_to_CMY=function(t){var _=t[0]/100*(1-t[3]/100)+t[3]/100,a=t[1]/100*(1-t[3]/100)+t[3]/100,i=t[2]/100*(1-t[3]/100)+t[3]/100;return[Math.round(100*_),Math.round(100*a),Math.round(100*i)]},t.prototype._RGB_to_CMYK=function(t){return this._CMY_to_CMYK(this._RGB_to_CMY(t))},t.prototype._CMYK_to_RGB=function(t){return this._CMY_to_RGB(this._CMYK_to_CMY(t))},t.prototype._RGB_to_XYZ=function(){var t,_,a,i=this._getRGBnucleotids(this._colorSpace),r=[this._deGamma(this._normaliz(this.r)),this._deGamma(this._normaliz(this.g)),this._deGamma(this._normaliz(this.b))];if(t=this._arrayProduct(r,i[0]),_=this._arrayProduct(r,i[1]),a=this._arrayProduct(r,i[2]),this._xyz.X=t,this._xyz.Y=_,this._xyz.Z=a,(1==this._doAdapta||1==this._doAdaptaUSER)&&-1!=this._doAdaptaUSER){var e=this._adt_adaptation(this._refWhiteName,this._adtAlg);this._xyz.X=e[0],this._xyz.Y=e[1],this._xyz.Z=e[2]}return[this._xyz.X,this._xyz.Y,this._xyz.Z]},t.prototype._XYZ_to_RGB=function(){var t=this._getRGBnucleotids(this._colorSpace,!0),_=[this._xyz.X,this._xyz.Y,this._xyz.Z];1!=this._doAdapta&&1!=this._doAdaptaUSER||-1==this._doAdaptaUSER||(_=this._adt_invAdaptation(_,this._refWhiteName,this._adtAlg));var a,i,r;a=this._arrayProduct(_,t[0]),i=this._arrayProduct(_,t[1]),r=this._arrayProduct(_,t[2]);var e=[this._normaliz(this._enGamma(a),0,1,255),this._normaliz(this._enGamma(i),0,1,255),this._normaliz(this._enGamma(r),0,1,255)];return this._arrayRound(e),e},t.prototype._XYZ_to_Lab=function(t){var _=[this._xyz.X,this._xyz.Y,this._xyz.Z],a=.008856451679,i=903.2962962963;this._adt_setRefWhite("D65"),!0===t&&(this._getRGBnucleotids("sRGB"),_=this._adt_adaptation("D50",this._adtAlg));var r=_[0]/this._adt_refWhite.X,e=_[1]/this._adt_refWhite.Y,h=_[2]/this._adt_refWhite.Z,s=r>a?Math.pow(r,1/3):(i*r+16)/116,o=e>a?Math.pow(e,1/3):(i*e+16)/116;return[116*o-16,500*(s-o),200*(o-(h>a?Math.pow(h,1/3):(i*h+16)/116))]},t.prototype._LCHab_to_XYZ=function(t){var _=[0,0,0];return _[0]=t[0],_[1]=t[1]*Math.cos(t[2]*Math.PI/180),_[2]=t[1]*Math.sin(t[2]*Math.PI/180),this._Lab_to_XYZ(_,!1)},t.prototype._XYZ_to_LCHab=function(){var t=this._XYZ_to_Lab(t,!1),_=[0,0,0];return _[0]=t[0],_[1]=Math.sqrt(t[1]*t[1]+t[2]*t[2]),_[2]=180*Math.atan2(t[2],t[1])/Math.PI,_[2]<0&&(_[2]+=360),_},t.prototype._Lab_to_XYZ=function(t,_){var a=[0,0,0],i=.008856451679,r=903.2962962963,e={L:t[0],a:t[1],b:t[2]},h=(e.L+16)/116,s=.002*e.a+h,o=h-.005*e.b,n=s*s*s,d=o*o*o,p=n>i?n:(116*s-16)/r,f=e.L>8?Math.pow((e.L+16)/116,3):e.L/r,u=d>i?d:(116*o-16)/r;return!0===_?this._adt_setRefWhite("D50"):this._adt_setRefWhite("D65"),a[0]=p*this._adt_refWhite.X,a[1]=f*this._adt_refWhite.Y,a[2]=u*this._adt_refWhite.Z,this._xyz.X=a[0],this._xyz.Y=a[1],this._xyz.Z=a[2],!0===_&&(this._getRGBnucleotids("sRGB"),a=this._adt_invAdaptation(a,"D50",this._adtAlg)),this._xyz.X=a[0],this._xyz.Y=a[1],this._xyz.Z=a[2],[this._xyz.X,this._xyz.Y,this._xyz.Z]},t.prototype._XYZ_to_xyY=function(){var t=[0,0,0],_=this._xyz.X+this._xyz.Y+this._xyz.Z;return _>0?(t[0]=this._xyz.X/_,t[1]=this._xyz.Y/_):(this._adt_setRefWhite(this._refWhiteName),t[0]=this._adt_refWhite.X/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z),t[1]=this._adt_refWhite.Y/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z)),t[2]=this._xyz.Y,t},t.prototype._xyY_to_XYZ=function(t){var _=[0,0,0];return t[1]<1e-6?_[0]=_[1]=_[2]=0:(_[0]=t[0]*t[2]/t[1],_[1]=t[2],_[2]=(1-t[0]-t[1])*t[2]/t[1]),this._xyz.X=_[0],this._xyz.Y=_[1],this._xyz.Z=_[2],_},t.prototype._xyY_to_Wavelength=function(t){var _,a=t[0],i=t[1],r=this._adt_refWhite.X/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z),e=this._adt_refWhite.Y/(this._adt_refWhite.X+this._adt_refWhite.Y+this._adt_refWhite.Z),h=0,s=[0,0],o=[0,0],n=[0,0],d=a-r,p=i-e;if(d>=-1e-6&&d<=1e-6&&p>=-1e-6&&p<=1e-6)return 0;for(_=360;_<=830;_+=5){var f=(_-360)/5,u=830==_?0:f+1,R=5*u+360,B=[1299e-7,2321e-7,4149e-7,7416e-7,.001368,.002236,.004243,.00765,.01431,.02319,.04351,.07763,.13438,.21477,.2839,.3285,.34828,.34806,.3362,.3187,.2908,.2511,.19536,.1421,.09564,.05795001,.03201,.0147,.0049,.0024,.0093,.0291,.06327,.1096,.1655,.2257499,.2904,.3597,.4334499,.5120501,.5945,.6784,.7621,.8425,.9163,.9786,1.0263,1.0567,1.0622,1.0456,1.0026,.9384,.8544499,.7514,.6424,.5419,.4479,.3608,.2835,.2187,.1649,.1212,.0874,.0636,.04677,.0329,.0227,.01584,.01135916,.008110916,.005790346,.004109457,.002899327,.00204919,.001439971,.0009999493,.0006900786,.0004760213,.0003323011,.0002348261,.0001661505,117413e-9,8307527e-11,5870652e-11,4150994e-11,2935326e-11,2067383e-11,1455977e-11,1025398e-11,7221456e-12,5085868e-12,3581652e-12,2522525e-12,1776509e-12,1251141e-12],M=[3917e-9,6965e-9,1239e-8,2202e-8,39e-6,64e-6,12e-5,217e-6,396e-6,64e-5,.00121,.00218,.004,.0073,.0116,.01684,.023,.0298,.038,.048,.06,.0739,.09098,.1126,.13902,.1693,.20802,.2586,.323,.4073,.503,.6082,.71,.7932,.862,.9148501,.954,.9803,.9949501,1,.995,.9786,.952,.9154,.87,.8163,.757,.6949,.631,.5668,.503,.4412,.381,.321,.265,.217,.175,.1382,.107,.0816,.061,.04458,.032,.0232,.017,.01192,.00821,.005723,.004102,.002929,.002091,.001484,.001047,74e-5,52e-5,3611e-7,2492e-7,1719e-7,12e-5,848e-7,6e-5,424e-7,3e-5,212e-7,1499e-8,106e-7,74657e-10,52578e-10,37029e-10,26078e-10,18366e-10,12934e-10,9.1093e-7,6.4153e-7,4.5181e-7],G=[6061e-7,.001086,.001946,.003486,.006450001,.01054999,.02005001,.03621,.06785001,.1102,.2074,.3713,.6456,1.0390501,1.3856,1.62296,1.74706,1.7826,1.77211,1.7441,1.6692,1.5281,1.28764,1.0419,.8129501,.6162,.46518,.3533,.272,.2123,.1582,.1117,.07824999,.05725001,.04216,.02984,.0203,.0134,.008749999,.005749999,.0039,.002749999,.0021,.0018,.001650001,.0014,.0011,.001,8e-4,6e-4,34e-5,24e-5,19e-5,1e-4,4999999e-11,3e-5,2e-5,1e-5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=B[f]/(B[f]+M[f]+G[f]),m=M[f]/(B[f]+M[f]+G[f]),y=B[u]/(B[u]+M[u]+G[u]),x=M[u]/(B[u]+M[u]+G[u]),X=c-r,W=m-e,A=y-c,l=x-m,Y=(d*W-p*X)/(p*A-d*l);if(!(Y<0||Y>=1)){var C=Math.abs(d)>=Math.abs(p)?(A*Y+X)/d:(l*Y+W)/p;s[h]=C,n[h]=_,o[h]=(R-_)*Y+_,h+=1}}return 830==n[1]&&s[1]>0?-o[0]:s[0]>=0?o[0]:o[1]},t.prototype._XYZ_to_Luv=function(){var t=[0,0,0];this._adt_setRefWhite("D65");var _=this._xyz.X+15*this._xyz.Y+3*this._xyz.Z,a=_>0?4*this._xyz.X/(this._xyz.X+15*this._xyz.Y+3*this._xyz.Z):0,i=_>0?9*this._xyz.Y/(this._xyz.X+15*this._xyz.Y+3*this._xyz.Z):0,r=4*this._adt_refWhite.X/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),e=9*this._adt_refWhite.Y/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),h=this._xyz.Y/this._adt_refWhite.Y;return t[0]=h>216/24389?116*Math.pow(h,1/3)-16:24389/27*h,t[1]=13*t[0]*(a-r),t[2]=13*t[0]*(i-e),t},t.prototype._Luv_to_XYZ=function(t){var _={X:0,Y:0,Z:0};this._adt_setRefWhite("D65"),_.Y=t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/(24389/27);var a=4*this._adt_refWhite.X/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),i=9*this._adt_refWhite.Y/(this._adt_refWhite.X+15*this._adt_refWhite.Y+3*this._adt_refWhite.Z),r=(52*t[0]/(t[1]+13*t[0]*a)-1)/3,e=-5*_.Y,h=_.Y*(39*t[0]/(t[2]+13*t[0]*i)-5);_.X=(h-e)/(r- -1/3),_.Z=_.X*r+e,this._xyz.X=_.X,this._xyz.Y=_.Y,this._xyz.Z=_.Z},t.prototype._hex_to_rgb=function(t){var _,a,i;return 3==t.length?(_=parseInt(t.slice(0,1)+t.slice(0,1),16),a=parseInt(t.slice(1,2)+t.slice(1,2),16),i=parseInt(t.slice(2,3)+t.slice(2,3),16)):6==t.length&&(_=parseInt(t.slice(0,2),16),a=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16)),[_,a,i]},t.prototype._rgb_to_hex=function(t){var _=65536*t[0]+256*t[1]+t[2];for(_=_.toString(16).toUpperCase();_.length<6;)_="0"+_;return _.toString(16).toUpperCase()},t.prototype._normaInputRGB=function(t){var _=!1,a=0;if(3==t.length){if(t[1]>1&&t[1]>1&&t[1]>1)return t;for(a=0;a<t.length;a++)String(t[a]).indexOf(".")>-1&&(_=!0);if(1==_)for(a=0;a<t.length;a++)t[a]=this._normaliz(t[a],0,1,255)}return t},t.prototype._normaOutRGB=function(t){var _=0;for(_=0;_<t.length;_++)t[_]=Math.round(t[_]),(t[_]<0||-0==t[_])&&(t[_]=0);return t},t.prototype._normaOutLab=function(t,_){var a=0;for(a=0;a<t.length;a++)t[a]=_?Math.round(t[a]):+t[a].toFixed(4);return t},t.prototype._normaOutX=function(t,_){var a=0;for(a=0;a<t.length;a++)t[a]=+t[a].toFixed(_);return t},t.prototype._normaInputXYZ=function(t){var _=0;if(t[0]>1||t[1]>1||t[2]>1)for(_=0;_<t.length;_++)t[_]=t[_]/100;return t},t.prototype.setRefWhite=function(t){return 0==arguments.length?this._refWhiteNameUSER="":this._refWhiteNameUSER=t,this},t.prototype.getRefWhite=function(){return this._refWhiteNameUSER.length>0?this._refWhiteNameUSER:this._refWhiteName},t.prototype.rgb=function(){return this._rgbX(arguments,this._COLORSPACES.sRGB)},t.prototype._rgbX=function(t,_){var a=[0,0,0]
;return this._colorSpace=_,0==t.length?(a=this._XYZ_to_RGB(),this._normaOutRGB(a)):(1==t.length&&(Array.isArray(t[0])?3==t[0].length&&(a=t[0]):"#"==t[0].slice(0,1)&&(a=this._hex_to_rgb(t[0].slice(1,t[0].length)))),3==t.length&&(a[0]=t[0],a[1]=t[1],a[2]=t[2]),this._normaInputRGB(a),this.r=a[0],this.g=a[1],this.b=a[2],this._RGB_to_XYZ(),this)},t.prototype._LabX=function(t,_){var a=[0,0,0];return 0==t.length?(a=this._XYZ_to_Lab(_),this._normaOutLab(a,_),a):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(a=t[0]),3==t.length&&(a[0]=t[0],a[1]=t[1],a[2]=t[2]),this._Lab_to_XYZ(a,_),this)},t.prototype._xyYX=function(t){var _=[0,0,0];return 0==t.length?(_=this._XYZ_to_xyY(),this._normaOutX(_,4),_):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(_=t[0]),3==t.length&&(_[0]=t[0],_[1]=t[1],_[2]=t[2]),this._xyY_to_XYZ(_),this)},t.prototype._LCHabX=function(t){var _=[0,0,0];return 0==t.length?(_=this._XYZ_to_LCHab(),this._normaOutX(_,4),_):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(_=t[0]),3==t.length&&(_[0]=t[0],_[1]=t[1],_[2]=t[2]),this._LCHab_to_XYZ(_),this)},t.prototype._LuvX=function(t){var _=[0,0,0];return 0==t.length?(_=this._XYZ_to_Luv(),this._normaOutX(_,4),_):(1==t.length&&Array.isArray(t[0])&&3==t[0].length&&(_=t[0]),3==t.length&&(_[0]=t[0],_[1]=t[1],_[2]=t[2]),this._Luv_to_XYZ(_),this)},t.prototype._baseRGB_XXXx=function(t,_){var a=[0,0,0];if(0==t.length||"string"==typeof t[0]){"string"==typeof t[0]&&(this._colorSpace=t[0]);var i=this._XYZ_to_RGB();if("HSL"==_)return this._RGB_to_HSL(i);if("HSL255"==_)return this._RGB_to_HSL_255(i);if("HSLwin"==_)return this._RGB_to_HSL_win239(i);if("HSV"==_||"HSB"==_)return this._RGB_to_HSV(i);if("HWB"==_)return this._RGB_to_HWB(i);if("YUV"==_)return this._RGB_to_YUV(i);if("YCbCr"==_)return this._RGB_to_YCbCr(i);if("JpegYCbCr"==_)return this._RGB_to_JpegYCbCr(i);if("YIQ"==_)return this._RGB_to_YIQ(i);if("YPbPr"==_)return this._RGB_to_YPbPr(i);if("CMY"==_)return this._RGB_to_CMY(i);if("CMYK"==_)return this._RGB_to_CMYK(i)}1!=t.length&&2!=t.length||(this._colorSpace="sRGB","string"==typeof t[1]&&(this._colorSpace=t[3]),Array.isArray(t[0])&&3==t[0].length&&(a=t[0])),(t.length>=3||"string"==typeof t[3])&&(this._colorSpace="sRGB","string"==typeof t[3]&&(this._colorSpace=t[3]),a[0]=t[0],a[1]=t[1],a[2]=t[2],"number"==typeof t[3]&&(a[3]=t[3]));var r=[0,0,0];return"HSL"==_?r=this._HSL_to_RGB([a[0],a[1],a[2]]):"HSL255"==_?r=this._HSL_to_RGB_255([a[0],a[1],a[2]]):"HSLwin"==_?r=this._HSL_to_RGB_win240([a[0],a[1],a[2]]):"HSV"==_||"HSB"==_?r=this._HSV_to_RGB([a[0],a[1],a[2]]):"HWB"==_?r=this._HWB_to_RGB([a[0],a[1],a[2]]):"CMY"==_?r=this._CMY_to_RGB([a[0],a[1],a[2]]):"YUV"==_?r=this._YUV_to_RGB([a[0],a[1],a[2]]):"YCbCr"==_?r=this._YCbCr_to_RGB([a[0],a[1],a[2]]):"JpegYCbCr"==_?r=this._JpegYCbCr_to_RGB([a[0],a[1],a[2]]):"YIQ"==_?r=this._YIQ_to_RGB([a[0],a[1],a[2]]):"YPbPr"==_?r=this._YPbPr_to_RGB_([a[0],a[1],a[2]]):"CMYK"==_&&(r=this._CMYK_to_RGB([a[0],a[1],a[2],a[3]])),this.r=r[0],this.g=r[1],this.b=r[2],this._RGB_to_XYZ(),this},t.prototype.Luv=function(){return this._LuvX(arguments)},t.prototype.xyY=function(){return this._xyYX(arguments)},t.prototype.LabPS=function(){return this._LabX(arguments,!0)},t.prototype.Lab=function(){return this._LabX(arguments,!1)},t.prototype.LCHab=function(){return this._LCHabX(arguments,!1)},t.prototype.HSL=function(){return this._baseRGB_XXXx(arguments,"HSL")},t.prototype.HSL255=function(){return this._baseRGB_XXXx(arguments,"HSL255")},t.prototype.HSL240=function(){return this._baseRGB_XXXx(arguments,"HSLwin")},t.prototype.HSV=function(){return this._baseRGB_XXXx(arguments,"HSV")},t.prototype.HSB=function(){return this._baseRGB_XXXx(arguments,"HSV")},t.prototype.HWB=function(){return this._baseRGB_XXXx(arguments,"HWB")},t.prototype.YPbPr=function(){return this._baseRGB_XXXx(arguments,"YPbPr")},t.prototype.YIQ=function(){return this._baseRGB_XXXx(arguments,"YIQ")},t.prototype.JpegYCbCr=function(){return this._baseRGB_XXXx(arguments,"JpegYCbCr")},t.prototype.YCbCr=function(){return this._baseRGB_XXXx(arguments,"YCbCr")},t.prototype.YUV=function(){return this._baseRGB_XXXx(arguments,"YUV")},t.prototype.CMYK=function(){return this._baseRGB_XXXx(arguments,"CMYK")},t.prototype.CMY=function(){return this._baseRGB_XXXx(arguments,"CMY")},t.prototype.sRGB=function(){return this._rgbX(arguments,this._COLORSPACES.sRGB)},t.prototype.AdobeRGB=function(){return this._rgbX(arguments,this._COLORSPACES.AdobeRGB)},t.prototype.AppleRGB=function(){return this._rgbX(arguments,this._COLORSPACES.AppleRGB)},t.prototype.BestRGB=function(){return this._rgbX(arguments,this._COLORSPACES.BestRGB)},t.prototype.BetaRGB=function(){return this._rgbX(arguments,this._COLORSPACES.BetaRGB)},t.prototype.BruceRGB=function(){return this._rgbX(arguments,this._COLORSPACES.BruceRGB)},t.prototype.CIERGB=function(){return this._rgbX(arguments,this._COLORSPACES.CIERGB)},t.prototype.ColorMatchRGB=function(){return this._rgbX(arguments,this._COLORSPACES.ColorMatchRGB)},t.prototype.DonRGB4=function(){return this._rgbX(arguments,this._COLORSPACES.DonRGB4)},t.prototype.ECIRGBv2=function(){return this._rgbX(arguments,this._COLORSPACES.ECIRGBv2)},t.prototype.EktaSpacePS5=function(){return this._rgbX(arguments,this._COLORSPACES.EktaSpacePS5)},t.prototype.NTSCRGB=function(){return this._rgbX(arguments,this._COLORSPACES.NTSCRGB)},t.prototype.PALSECAMRGB=function(){return this._rgbX(arguments,this._COLORSPACES.PALSECAMRGB)},t.prototype.ProPhotoRGB=function(){return this._rgbX(arguments,this._COLORSPACES.ProPhotoRGB)},t.prototype.SMPTECRGB=function(){return this._rgbX(arguments,this._COLORSPACES.SMPTECRGB)},t.prototype.WideGamutRGB=function(){return this._rgbX(arguments,this._COLORSPACES.WideGamutRGB)},t.prototype.getWavelength=function(t){return+this._xyY_to_Wavelength(this.xyY()).toFixed(4)},t.prototype.getLuma=function(t){var _=this._XYZ_to_RGB();return this._normalizArray(_,0,255,1),"601"==t?.299*_[0]+.587*_[1]+.114*_[2]:"HSP"==t?Math.sqrt(.241*Math.pow(_[0],2)+.691*Math.pow(_[1],2)+.068*Math.pow(_[2],2)):.2126*_[0]+.7152*_[1]+.0722*_[2]},t.prototype.getWCAGluma=function(){for(var t=this._XYZ_to_RGB(),_=[],a=0;a<t.length;a++){var i=t[a]/255;_[a]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*_[0]+.7152*_[1]+.0722*_[2]},t.prototype.getWCAGcontrastThan=function(t){var _=this.getWCAGluma(),a=t.getWCAGluma();return _>a?(_+.05)/(a+.05):(a+.05)/(_+.05)},t.prototype.getHex=function(){var t=this._XYZ_to_RGB();return"#"+this._rgb_to_hex([t[0],t[1],t[2]])},t.prototype.XYZ=function(){var t=[0,0,0];return 0==arguments.length?t=[this._xyz.X,this._xyz.Y,this._xyz.Z]:(1==arguments.length&&Array.isArray(arguments[0])&&3==arguments[0].length&&(t=arguments[0]),3==arguments.length&&(t[0]=arguments[0],t[1]=arguments[1],t[2]=arguments[2]),this._normaInputXYZ(t),this._xyz.X=t[0],this._xyz.Y=t[1],this._xyz.Z=t[2],this)},t.prototype.colorDiff=function(t,_,a){var i=t.Lab(),r={L:i[0],a:i[1],b:i[2]},e=_.Lab(),h={L:e[0],a:e[1],b:e[2]},s=0;if("DeltaE1976"==a){var o=r.L-h.L,n=r.a-h.a,d=r.b-h.b;s=Math.sqrt(o*o+n*n+d*d)}if("DeltaE1994_T"==a||"DeltaE1994_G"==a){var p="DeltaE1994_T"==a?.048:.045,f="DeltaE1994_T"==a?.014:.015,u="DeltaE1994_T"==a?2:1,R=1,B=1,M=Math.sqrt(r.a*r.a+r.b*r.b),G=Math.sqrt(h.a*h.a+h.b*h.b),c=r.a-h.a,m=r.b-h.b,y=M-G,x=c*c+m*m-y*y,X=x>0?Math.sqrt(x):0,o=r.L-h.L,W=1,A=1+p*M,l=1+f*M,Y=o/(u*W),C=y/(R*A),b=X/(B*l);s=Math.sqrt(Y*Y+C*C+b*b)}if("DeltaE2000"==a){var u=1,R=1,B=1,g=.5*(r.L+h.L),L=Math.sqrt(r.a*r.a+r.b*r.b),S=Math.sqrt(h.a*h.a+h.b*h.b),v=.5*(L+S),z=v*v*v*v*v*v*v,Z=.5*(1-Math.sqrt(z/(z+6103515625))),P=r.a*(1+Z),E=h.a*(1+Z),I=Math.sqrt(P*P+r.b*r.b),H=Math.sqrt(E*E+h.b*h.b),D=.5*(I+H),V=180*Math.atan2(r.b,P)/Math.PI;V<0&&(V+=360);var O=180*Math.atan2(h.b,E)/Math.PI;O<0&&(O+=360);var w=Math.abs(V-O)>180?.5*(V+O+360):.5*(V+O),k=1-.17*Math.cos(Math.PI*(w-30)/180)+.24*Math.cos(Math.PI*(2*w)/180)+.32*Math.cos(Math.PI*(3*w+6)/180)-.2*Math.cos(Math.PI*(4*w-63)/180);if(Math.abs(O-V)<=180)var T=O-V;else var T=O<=V?O-V+360:O-V-360;var U=h.L-r.L,q=H-I,N=2*Math.sqrt(I*H)*Math.sin(Math.PI*(.5*T)/180),W=1+.015*(g-50)*(g-50)/Math.sqrt(20+(g-50)*(g-50)),A=1+.045*D,l=1+.015*D*k,F=30*Math.exp(-(w-275)/25*((w-275)/25)),K=D*D*D*D*D*D*D,J=Math.sqrt(K/(K+6103515625)),Q=-2*J*Math.sin(Math.PI*(2*F)/180);s=Math.sqrt(U/(u*W)*(U/(u*W))+q/(R*A)*(q/(R*A))+N/(B*l)*(N/(B*l))+q/(R*A)*(N/(B*l))*Q)}if("DeltaECMC_11"==a||"DeltaECMC_21"==a){if("DeltaECMC_11"==a)var j=1,$=1;else if("DeltaECMC_21"==a)var j=2,$=1;for(var L=Math.sqrt(r.a*r.a+r.b*r.b),S=Math.sqrt(h.a*h.a+h.b*h.b),tt=r.L<16?.511:.040975*r.L/(1+.01765*r.L),_t=.0638*L/(1+.0131*L)+.638,at=L<1e-6?0:180*Math.atan2(r.b,r.a)/Math.PI;at<0;)at+=360;for(;at>=360;)at-=360;var k=at>=164&&at<=345?.56+Math.abs(.2*Math.cos(Math.PI*(at+168)/180)):.36+Math.abs(.4*Math.cos(Math.PI*(at+35)/180)),it=L*L*L*L,rt=Math.sqrt(it/(it+1900)),et=_t*(rt*k+1-rt),o=r.L-h.L,y=L-S,c=r.a-h.a,m=r.b-h.b,ht=c*c+m*m-y*y,st=o/(j*tt),ot=y/($*_t),nt=et;s=Math.sqrt(st*st+ot*ot+ht/(nt*nt))}return+s.toFixed(2)},t.prototype.diff_ECMC11_Than=function(t){return this.colorDiff(this,t,"DeltaECMC_11")},t.prototype.diff_ECMC21_Than=function(t){return this.colorDiff(this,t,"DeltaECMC_21")},t.prototype.diff_DE2000_Than=function(t){return this.colorDiff(this,t,"DeltaE2000")},t.prototype.diff_DE1976_Than=function(t){return this.colorDiff(this,t,"DeltaE1976")},t.prototype.diff_DE1994_GraphicArts_Than=function(t){return this.colorDiff(this,t,"DeltaE1994_G")},t.prototype.diff_DE1994_Textiles_Than=function(t){return this.colorDiff(this,t,"DeltaE1994_T")},t});
